# Plan-Do(計画・実行)ページ E2Eテスト仕様書

生成日: 2025-11-01
対象ページ: /plan-do
テスト環境: モック実装（PlanDoService）
作成者: E2Eテスト仕様書作成エージェント

## 概要

- 総テスト項目数: 85項目
- 高優先度: 48項目
- 中優先度: 27項目
- 低優先度: 10項目

## テスト項目一覧

### 正常系テスト（38項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-PLDO-001 | Plan-Doページ初期アクセス | なし | 参照 | 正常系 | 高 | ページが正しく表示される | /plan-doにアクセス | ページタイトル「計画・実行」が表示、PlanタブとDoタブが表示される | | | |
| 2 | E2E-PLDO-002 | 初期タブ状態（Plan） | E2E-PLDO-001 | 参照 | 正常系 | 高 | Planタブがアクティブ | ページアクセス時 | Planタブがアクティブ（青色背景）、Doタブが非アクティブ | | | |
| 3 | E2E-PLDO-003 | ローディング状態表示 | なし | 参照 | 正常系 | 高 | データ取得中のローディング表示 | ページアクセス直後 | スピナーアイコンと「読み込み中...」テキストが表示される | | | |
| 4 | E2E-PLDO-004 | 目標一覧表示 | E2E-PLDO-001 | 参照 | 正常系 | 高 | モックデータの目標が表示される | Planタブ選択時 | 2件の目標（「英語力を向上させる」「健康的な生活習慣」）が表示される | | | |
| 5 | E2E-PLDO-005 | 目標カード詳細表示 | E2E-PLDO-004 | 参照 | 正常系 | 高 | 目標の詳細情報が正しく表示される | 目標カードを確認 | タイトル、説明、期限、進捗率、タスク完了数が表示される | | | |
| 6 | E2E-PLDO-006 | 目標の進捗バー表示 | E2E-PLDO-005 | 参照 | 正常系 | 中 | 進捗率が正しく計算・表示される | 目標カードの進捗バー確認 | 完了タスク数÷総タスク数で計算された進捗率が表示される | | | |
| 7 | E2E-PLDO-007 | 目標の期限表示 | E2E-PLDO-005 | 参照 | 正常系 | 中 | 期限が日本語形式で表示される | 目標カードの期限確認 | 「期限: YYYY/MM/DD」形式で表示される | | | |
| 8 | E2E-PLDO-008 | 目標なし状態表示 | E2E-PLDO-001 | 参照 | 正常系 | 中 | 目標がない場合の空状態表示 | 全目標削除後 | フラグアイコンと「まだ目標がありません」メッセージが表示される | | | |
| 9 | E2E-PLDO-009 | 新規目標作成ボタン表示 | E2E-PLDO-001 | 参照 | 正常系 | 高 | 目標作成ボタンが表示される | Planタブ選択時 | 「新規目標を作成」ボタンが画面下部に表示される | | | |
| 10 | E2E-PLDO-010 | 目標作成モーダル起動 | E2E-PLDO-009 | 作成 | 正常系 | 高 | モーダルが開く | 「新規目標を作成」ボタンクリック | 「新規目標を作成」タイトルのモーダルが表示される | | | |
| 11 | E2E-PLDO-011 | 目標作成フォーム表示 | E2E-PLDO-010 | 作成 | 正常系 | 高 | フォーム要素が表示される | モーダル内確認 | タイトル入力、説明入力、期限選択フィールドが表示される | | | |
| 12 | E2E-PLDO-012 | 目標作成（必須項目のみ） | E2E-PLDO-010 | 作成 | 正常系 | 高 | タイトルのみで目標作成可能 | タイトル「新しい目標」入力→作成ボタン | 目標が作成され一覧に追加、モーダルが閉じる | | | |
| 13 | E2E-PLDO-013 | 目標作成（全項目入力） | E2E-PLDO-010 | 作成 | 正常系 | 高 | 全項目入力で目標作成 | タイトル「テスト目標」、説明「テスト説明」、期限「2025-12-31」入力→作成 | 目標が全項目付きで作成され一覧に追加される | | | |
| 14 | E2E-PLDO-014 | 目標編集ボタンクリック | E2E-PLDO-005 | 更新 | 正常系 | 高 | 編集モーダルが開く | 目標カードの編集ボタンクリック | 「目標を編集」タイトルのモーダルが開き、既存データが入力済み | | | |
| 15 | E2E-PLDO-015 | 目標編集（タイトル変更） | E2E-PLDO-014 | 更新 | 正常系 | 高 | タイトルを更新できる | タイトル変更→更新ボタン | 目標のタイトルが更新され一覧に反映される | | | |
| 16 | E2E-PLDO-016 | 目標編集（説明変更） | E2E-PLDO-014 | 更新 | 正常系 | 中 | 説明を更新できる | 説明変更→更新ボタン | 目標の説明が更新され一覧に反映される | | | |
| 17 | E2E-PLDO-017 | 目標編集（期限変更） | E2E-PLDO-014 | 更新 | 正常系 | 中 | 期限を更新できる | 期限変更→更新ボタン | 目標の期限が更新され一覧に反映される | | | |
| 18 | E2E-PLDO-018 | 目標削除確認ダイアログ表示 | E2E-PLDO-005 | 削除 | 正常系 | 高 | 削除確認が表示される | 目標カードの削除ボタンクリック | ブラウザ標準のconfirmダイアログが表示される | | | |
| 19 | E2E-PLDO-019 | 目標削除実行 | E2E-PLDO-018 | 削除 | 正常系 | 高 | 目標が削除される | confirmダイアログでOK | 目標が一覧から削除される | | | |
| 20 | E2E-PLDO-020 | 目標削除キャンセル | E2E-PLDO-018 | 削除 | 正常系 | 中 | 削除がキャンセルされる | confirmダイアログでキャンセル | 目標が削除されず一覧に残る | | | |
| 21 | E2E-PLDO-021 | Doタブへの切り替え | E2E-PLDO-001 | 参照 | 正常系 | 高 | Doタブがアクティブになる | Doタブボタンクリック | Doタブが緑色背景でアクティブ、Planタブが非アクティブ | | | |
| 22 | E2E-PLDO-022 | 今日のタスク一覧表示 | E2E-PLDO-021 | 参照 | 正常系 | 高 | 今日が期限のタスクが表示される | Doタブ選択時 | 今日が期限のタスク3件が「今日のタスク」セクションに表示される | | | |
| 23 | E2E-PLDO-023 | タスクアイテム詳細表示 | E2E-PLDO-022 | 参照 | 正常系 | 高 | タスク情報が正しく表示される | タスクアイテム確認 | チェックボックス、タイトル、優先度バッジ、目標名が表示される | | | |
| 24 | E2E-PLDO-024 | タスク優先度バッジ表示（高） | E2E-PLDO-023 | 参照 | 正常系 | 中 | 高優先度の色分け表示 | 優先度「高」のタスク確認 | 赤背景の「高」バッジが表示される | | | |
| 25 | E2E-PLDO-025 | タスク優先度バッジ表示（中） | E2E-PLDO-023 | 参照 | 正常系 | 中 | 中優先度の色分け表示 | 優先度「中」のタスク確認 | 黄色背景の「中」バッジが表示される | | | |
| 26 | E2E-PLDO-026 | タスク優先度バッジ表示（低） | E2E-PLDO-023 | 参照 | 正常系 | 中 | 低優先度の色分け表示 | 優先度「低」のタスク確認 | 緑背景の「低」バッジが表示される | | | |
| 27 | E2E-PLDO-027 | タスク完了チェック | E2E-PLDO-023 | 更新 | 正常系 | 高 | タスクを完了状態にできる | 未完了タスクのチェックボックスON | タスクが完了状態（取り消し線、薄い色）になる | | | |
| 28 | E2E-PLDO-028 | タスク完了解除 | E2E-PLDO-027 | 更新 | 正常系 | 高 | 完了タスクを未完了に戻せる | 完了タスクのチェックボックスOFF | タスクが未完了状態（通常表示）に戻る | | | |
| 29 | E2E-PLDO-029 | タスクなし状態表示 | E2E-PLDO-021 | 参照 | 正常系 | 中 | 今日のタスクがない場合の表示 | 今日が期限のタスクが0件の状態 | 「今日のタスクはありません」メッセージとアイコンが表示される | | | |
| 30 | E2E-PLDO-030 | ログ記録フォーム表示 | E2E-PLDO-021 | 参照 | 正常系 | 高 | ログフォームが表示される | Doタブ選択時 | 「今日のログを記録」カードが表示される | | | |
| 31 | E2E-PLDO-031 | ログテキスト入力 | E2E-PLDO-030 | 作成 | 正常系 | 高 | ログ内容を入力できる | テキストエリアに入力 | 入力内容が表示される | | | |
| 32 | E2E-PLDO-032 | 感情選択肢表示 | E2E-PLDO-030 | 参照 | 正常系 | 高 | 4つの感情オプションが表示される | ログフォーム確認 | 😊嬉しい、😐普通、😢悲しい、😰不安の4つが表示される | | | |
| 33 | E2E-PLDO-033 | 感情選択（デフォルト普通） | E2E-PLDO-030 | 参照 | 正常系 | 中 | 初期状態で「普通」が選択されている | フォーム初期表示 | 😐普通がハイライト表示（青枠、薄青背景） | | | |
| 34 | E2E-PLDO-034 | 感情選択変更 | E2E-PLDO-032 | 作成 | 正常系 | 高 | 感情を選択できる | 😊嬉しいをクリック | 😊嬉しいがハイライト表示に変更される | | | |
| 35 | E2E-PLDO-035 | ログ保存（成功） | E2E-PLDO-031 | 作成 | 正常系 | 高 | ログが保存される | テキスト入力→ログを保存ボタン | ログが保存され、フォームがクリアされる | | | |
| 36 | E2E-PLDO-036 | 新規タスク作成ボタン表示 | E2E-PLDO-021 | 参照 | 正常系 | 高 | タスク作成ボタンが表示される | Doタブ選択時 | 「新規タスクを作成」ボタンが画面下部に表示される | | | |
| 37 | E2E-PLDO-037 | タスク作成モーダル起動 | E2E-PLDO-036 | 作成 | 正常系 | 高 | モーダルが開く | 「新規タスクを作成」ボタンクリック | 「新規タスクを作成」タイトルのモーダルが表示される | | | |
| 38 | E2E-PLDO-038 | タスク作成フォーム表示 | E2E-PLDO-037 | 作成 | 正常系 | 高 | フォーム要素が表示される | モーダル内確認 | タスク名、関連目標、期限、優先度フィールドが表示される | | | |
| 39 | E2E-PLDO-039 | タスク作成（必須項目のみ） | E2E-PLDO-037 | 作成 | 正常系 | 高 | タスク名のみで作成可能 | タスク名「新しいタスク」入力→作成 | タスクが作成され、Doタブで今日のタスクに追加される（dueDateが今日の場合） | | | |
| 40 | E2E-PLDO-040 | タスク作成（全項目入力） | E2E-PLDO-037 | 作成 | 正常系 | 高 | 全項目入力でタスク作成 | 名前、目標、期限、優先度すべて入力→作成 | タスクが全項目付きで作成される | | | |
| 41 | E2E-PLDO-041 | タスク作成時の目標選択 | E2E-PLDO-038 | 作成 | 正常系 | 中 | 既存目標から選択できる | 関連目標ドロップダウンで選択 | 選択した目標がタスクに関連付けられる | | | |
| 42 | E2E-PLDO-042 | タスク作成時の優先度選択 | E2E-PLDO-038 | 作成 | 正常系 | 中 | 優先度を選択できる | 優先度ドロップダウンで「高」選択 | タスクの優先度が「高」で作成される | | | |
| 43 | E2E-PLDO-043 | モーダル背景クリックで閉じる（目標） | E2E-PLDO-010 | 参照 | 正常系 | 低 | 背景クリックでモーダルが閉じる | モーダル外の背景クリック | モーダルが閉じる | | | |
| 44 | E2E-PLDO-044 | モーダル背景クリックで閉じる（タスク） | E2E-PLDO-037 | 参照 | 正常系 | 低 | 背景クリックでモーダルが閉じる | モーダル外の背景クリック | モーダルが閉じる | | | |
| 45 | E2E-PLDO-045 | モーダルキャンセルボタン（目標） | E2E-PLDO-010 | 参照 | 正常系 | 中 | キャンセルボタンでモーダルが閉じる | キャンセルボタンクリック | モーダルが閉じ、データは保存されない | | | |
| 46 | E2E-PLDO-046 | モーダルキャンセルボタン（タスク） | E2E-PLDO-037 | 参照 | 正常系 | 中 | キャンセルボタンでモーダルが閉じる | キャンセルボタンクリック | モーダルが閉じ、データは保存されない | | | |

### 異常系テスト（16項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 47 | E2E-PLDO-047 | APIエラー表示 | なし | 参照 | 異常系 | 高 | エラー発生時のエラー表示 | API呼び出し失敗を模擬 | 赤背景のエラーカードに「エラーが発生しました: [エラーメッセージ]」が表示される | | | モック環境では再現困難 |
| 48 | E2E-PLDO-048 | データなし状態表示 | なし | 参照 | 異常系 | 中 | データがない場合の表示 | data=nullの状態 | 「データがありません」メッセージが表示される | | | |
| 49 | E2E-PLDO-049 | 目標作成（タイトル空欄） | E2E-PLDO-010 | 作成 | 異常系 | 高 | タイトル未入力時のバリデーション | タイトル空欄→作成ボタン | 作成ボタンが無効化されている | | | |
| 50 | E2E-PLDO-050 | 目標作成（空白のみタイトル） | E2E-PLDO-010 | 作成 | 異常系 | 中 | 空白のみの入力を弾く | タイトルにスペースのみ入力→作成 | 作成ボタンが無効化されている | | | |
| 51 | E2E-PLDO-051 | 目標編集（タイトル削除） | E2E-PLDO-014 | 更新 | 異常系 | 高 | 編集時にタイトルを空にできない | タイトル削除→更新ボタン | 更新ボタンが無効化されている | | | |
| 52 | E2E-PLDO-052 | 目標削除時のエラー処理 | E2E-PLDO-018 | 削除 | 異常系 | 中 | 削除API失敗時のエラー表示 | API削除失敗を模擬 | エラーメッセージが表示される | | | モック環境では再現困難 |
| 53 | E2E-PLDO-053 | タスク作成（タスク名空欄） | E2E-PLDO-037 | 作成 | 異常系 | 高 | タスク名未入力時のバリデーション | タスク名空欄→作成ボタン | 作成ボタンが無効化されている | | | |
| 54 | E2E-PLDO-054 | タスク作成（空白のみタスク名） | E2E-PLDO-037 | 作成 | 異常系 | 中 | 空白のみの入力を弾く | タスク名にスペースのみ→作成 | 作成ボタンが無効化されている | | | |
| 55 | E2E-PLDO-055 | タスク完了切り替えエラー | E2E-PLDO-027 | 更新 | 異常系 | 中 | API失敗時のエラー処理 | API失敗を模擬 | エラーメッセージが表示され、状態が元に戻る | | | モック環境では再現困難 |
| 56 | E2E-PLDO-056 | ログ保存（内容空欄） | E2E-PLDO-030 | 作成 | 異常系 | 高 | 空欄のログは保存できない | テキスト空欄→保存ボタン | 保存ボタンが無効化されている | | | |
| 57 | E2E-PLDO-057 | ログ保存（空白のみ） | E2E-PLDO-030 | 作成 | 異常系 | 中 | 空白のみのログは保存できない | スペースのみ入力→保存 | 保存ボタンが無効化されている | | | |
| 58 | E2E-PLDO-058 | ログ保存エラー処理 | E2E-PLDO-035 | 作成 | 異常系 | 中 | API失敗時のエラー処理 | API失敗を模擬 | エラーメッセージが表示され、フォームがクリアされない | | | モック環境では再現困難 |
| 59 | E2E-PLDO-059 | ネットワーク切断時の挙動 | E2E-PLDO-001 | 参照 | 異常系 | 中 | オフライン時のエラー表示 | ネットワーク切断してアクセス | エラーメッセージが表示される | | | |
| 60 | E2E-PLDO-060 | 目標作成中の重複送信防止 | E2E-PLDO-012 | 作成 | 異常系 | 中 | 送信中のボタン無効化 | 作成ボタン連打 | 1回のみ送信され、送信中はボタンが無効化（「保存中...」表示） | | | |
| 61 | E2E-PLDO-061 | タスク作成中の重複送信防止 | E2E-PLDO-039 | 作成 | 異常系 | 中 | 送信中のボタン無効化 | 作成ボタン連打 | 1回のみ送信され、送信中はボタンが無効化（「作成中...」表示） | | | |
| 62 | E2E-PLDO-062 | ログ保存中の重複送信防止 | E2E-PLDO-035 | 作成 | 異常系 | 中 | 送信中のボタン無効化 | 保存ボタン連打 | 1回のみ送信され、送信中はボタンが無効化（「ログを保存中...」表示） | | | |

### セキュリティテスト（9項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 63 | E2E-PLDO-063 | 認証なしアクセス | なし | 認証 | セキュリティ | 高 | 未認証時のリダイレクト | ログアウト状態で/plan-doアクセス | /authにリダイレクトされる | | | Auth.js実装待ち |
| 64 | E2E-PLDO-064 | セッション期限切れ | E2E-PLDO-001 | 認証 | セキュリティ | 高 | セッション期限切れ時の挙動 | セッション期限切れ後に操作 | /authにリダイレクトされる | | | Auth.js実装待ち |
| 65 | E2E-PLDO-065 | XSS攻撃対策（目標タイトル） | E2E-PLDO-012 | 作成 | セキュリティ | 高 | スクリプトタグのエスケープ | タイトルに`<script>alert('XSS')</script>`入力 | スクリプトが実行されず、テキストとして表示される | | | |
| 66 | E2E-PLDO-066 | XSS攻撃対策（目標説明） | E2E-PLDO-013 | 作成 | セキュリティ | 高 | スクリプトタグのエスケープ | 説明に`<img src=x onerror=alert('XSS')>`入力 | スクリプトが実行されず、テキストとして表示される | | | |
| 67 | E2E-PLDO-067 | XSS攻撃対策（タスク名） | E2E-PLDO-039 | 作成 | セキュリティ | 高 | スクリプトタグのエスケープ | タスク名に`<svg onload=alert('XSS')>`入力 | スクリプトが実行されず、テキストとして表示される | | | |
| 68 | E2E-PLDO-068 | XSS攻撃対策（ログ内容） | E2E-PLDO-035 | 作成 | セキュリティ | 高 | スクリプトタグのエスケープ | ログに`<iframe src='javascript:alert(1)'>`入力 | スクリプトが実行されず、テキストとして表示される | | | |
| 69 | E2E-PLDO-069 | CSRF攻撃対策 | E2E-PLDO-012 | 作成 | セキュリティ | 中 | CSRFトークン検証 | 外部サイトから目標作成リクエスト | リクエストが拒否される | | | Auth.js実装時に自動対応 |
| 70 | E2E-PLDO-070 | 他ユーザーの目標アクセス防止 | E2E-PLDO-001 | 認証 | セキュリティ | 高 | 自分の目標のみ表示 | ログイン後に目標一覧取得 | 自分のuserIdに紐づく目標のみ表示される | | | API側で実装 |
| 71 | E2E-PLDO-071 | 他ユーザーのタスクアクセス防止 | E2E-PLDO-022 | 認証 | セキュリティ | 高 | 自分のタスクのみ表示 | ログイン後にタスク一覧取得 | 自分のuserIdに紐づくタスクのみ表示される | | | API側で実装 |

### レスポンシブテスト（9項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 72 | E2E-PLDO-072 | デスクトップ表示（1920x1080） | E2E-PLDO-001 | 参照 | レスポンシブ | 高 | デスクトップでの表示確認 | 画面サイズ1920x1080で表示 | レイアウトが崩れず、全要素が適切に表示される | | | |
| 73 | E2E-PLDO-073 | タブレット表示（768x1024） | E2E-PLDO-001 | 参照 | レスポンシブ | 高 | タブレットでの表示確認 | 画面サイズ768x1024で表示 | レイアウトが崩れず、タッチ操作に適したサイズ | | | |
| 74 | E2E-PLDO-074 | モバイル表示（375x667） | E2E-PLDO-001 | 参照 | レスポンシブ | 高 | モバイルでの表示確認 | 画面サイズ375x667で表示 | レイアウトが崩れず、モバイルに最適化された表示 | | | |
| 75 | E2E-PLDO-075 | モバイルでのタッチ操作（タブ切り替え） | E2E-PLDO-074 | 参照 | レスポンシブ | 中 | タッチでタブ切り替え可能 | モバイルでタブボタンをタップ | タブが切り替わる | | | |
| 76 | E2E-PLDO-076 | モバイルでのタッチ操作（チェックボックス） | E2E-PLDO-074 | 更新 | レスポンシブ | 高 | タッチでチェック可能 | モバイルでタスクチェックボックスをタップ | チェック状態が切り替わる | | | |
| 77 | E2E-PLDO-077 | モバイルでのタッチ操作（感情選択） | E2E-PLDO-074 | 作成 | レスポンシブ | 中 | タッチで感情選択可能 | モバイルで感情ボタンをタップ | 感情が選択される | | | |
| 78 | E2E-PLDO-078 | モバイルモーダル表示 | E2E-PLDO-074 | 参照 | レスポンシブ | 中 | モバイルでモーダルが適切に表示 | モバイルでモーダルを開く | モーダルが画面に収まり、スクロール可能 | | | |
| 79 | E2E-PLDO-079 | 縦向き・横向き切り替え | E2E-PLDO-074 | 参照 | レスポンシブ | 低 | 画面回転時の表示確認 | モバイルで縦↔横切り替え | レイアウトが適切に調整される | | | |
| 80 | E2E-PLDO-080 | 長いテキストの表示（目標説明） | E2E-PLDO-005 | 参照 | レスポンシブ | 中 | 長文の折り返し表示 | 500文字の説明を含む目標 | テキストが適切に折り返され、レイアウトが崩れない | | | |

### ワークフロー・エッジケーステスト（13項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 81 | E2E-PLDO-081 | 目標作成後に進捗0%表示 | E2E-PLDO-012 | 作成 | ワークフロー | 中 | タスクなし目標の進捗率 | タスクなしの目標作成 | 進捗率0%（0/0タスク完了）が表示される | | | |
| 82 | E2E-PLDO-082 | タスク作成後に目標の進捗率更新 | E2E-PLDO-040 | 作成 | ワークフロー | 高 | タスク追加で進捗率が変動 | 目標にタスク追加 | 目標の総タスク数が増加し、進捗率が再計算される | | | |
| 83 | E2E-PLDO-083 | タスク完了後に目標の進捗率更新 | E2E-PLDO-027 | 更新 | ワークフロー | 高 | タスク完了で進捗率が上昇 | タスクを完了 | 目標の完了タスク数が増加し、進捗率が上昇する | | | |
| 84 | E2E-PLDO-084 | 目標削除時に関連タスクも削除 | E2E-PLDO-019 | 削除 | ワークフロー | 高 | カスケード削除の確認 | タスクを持つ目標を削除 | 目標と関連タスクがすべて削除される | | | |
| 85 | E2E-PLDO-085 | タブ切り替え後のデータ保持 | E2E-PLDO-021 | 参照 | ワークフロー | 中 | タブ間の状態維持 | Plan→Do→Planと切り替え | データが保持され、再取得される | | | |
| 86 | E2E-PLDO-086 | 複数タスクの連続完了操作 | E2E-PLDO-027 | 更新 | ワークフロー | 高 | 連続操作の動作確認 | 3つのタスクを連続で完了 | すべてのタスクが正しく完了状態になる | | | |
| 87 | E2E-PLDO-087 | ページリロード後の状態確認 | E2E-PLDO-027 | 参照 | ワークフロー | 中 | データ永続性の確認 | タスク完了後にページリロード | 完了状態が保持されている（モックデータは消える） | | | モックデータは揮発性 |
| 88 | E2E-PLDO-088 | 長いタイトルの表示（目標） | E2E-PLDO-004 | 参照 | エッジケース | 中 | 長文タイトルの表示 | 100文字の目標タイトル | タイトルが適切に折り返され、レイアウトが崩れない | | | |
| 89 | E2E-PLDO-089 | 長いタイトルの表示（タスク） | E2E-PLDO-023 | 参照 | エッジケース | 中 | 長文タイトルの表示 | 100文字のタスクタイトル | タイトルが適切に折り返され、レイアウトが崩れない | | | |
| 90 | E2E-PLDO-090 | 特殊文字を含む目標作成 | E2E-PLDO-012 | 作成 | エッジケース | 低 | 特殊文字の入力 | タイトルに絵文字、記号を含む | 特殊文字が正しく保存・表示される | | | |
| 91 | E2E-PLDO-091 | 特殊文字を含むタスク作成 | E2E-PLDO-039 | 作成 | エッジケース | 低 | 特殊文字の入力 | タスク名に絵文字、記号を含む | 特殊文字が正しく保存・表示される | | | |
| 92 | E2E-PLDO-092 | 過去の期限の目標作成 | E2E-PLDO-013 | 作成 | エッジケース | 低 | 過去日付の設定 | 期限を過去の日付に設定 | 目標が作成され、期限が過去日付で表示される | | | 将来的に警告表示を検討 |
| 93 | E2E-PLDO-093 | ログ記録時の改行表示 | E2E-PLDO-035 | 作成 | エッジケース | 低 | 改行を含むログ | 複数行のログ内容を入力 | 改行が保持されて保存される | | | |

## テスト分類別カバレッジ

- 正常系: 46項目
- 異常系: 16項目
- セキュリティ: 9項目
- レスポンシブ: 9項目
- ワークフロー・エッジケース: 13項目

## API呼び出し一覧

| No | メソッド | エンドポイント | 用途 | テストID | 備考 |
|----|---------|--------------|------|----------|------|
| 1 | GET | /api/plan-do | ページ初期データ取得 | E2E-PLDO-001, E2E-PLDO-021 | モック: `getPlanDoPageData()` |
| 2 | GET | /api/goals | 目標一覧取得 | E2E-PLDO-004 | モック: `getGoals()` |
| 3 | POST | /api/goals | 目標作成 | E2E-PLDO-012, E2E-PLDO-013 | モック: `createGoal(form)` |
| 4 | PUT | /api/goals/{id} | 目標更新 | E2E-PLDO-015, E2E-PLDO-016, E2E-PLDO-017 | モック: `updateGoal(id, form)` |
| 5 | DELETE | /api/goals/{id} | 目標削除 | E2E-PLDO-019 | モック: `deleteGoal(id)` |
| 6 | GET | /api/tasks/today | 今日のタスク取得 | E2E-PLDO-022 | モック: `getTodayTasks()` |
| 7 | POST | /api/tasks | タスク作成 | E2E-PLDO-039, E2E-PLDO-040 | モック: `createTask(form)` |
| 8 | PATCH | /api/tasks/{id}/toggle | タスク完了切り替え | E2E-PLDO-027, E2E-PLDO-028 | モック: `toggleTaskCompletion(id)` |
| 9 | DELETE | /api/tasks/{id} | タスク削除 | - | モック: `deleteTask(id)` |
| 10 | POST | /api/logs | ログ記録 | E2E-PLDO-035 | モック: `createLog(form)` |

## 優先度別実施順序

### 高優先度（必須テスト）: 48項目

**依存関係なし（最優先）**:
- E2E-PLDO-001: Plan-Doページ初期アクセス
- E2E-PLDO-003: ローディング状態表示
- E2E-PLDO-047: APIエラー表示
- E2E-PLDO-063: 認証なしアクセス（Auth.js実装待ち）

**Planタブ基本機能（依存あり）**:
1. E2E-PLDO-001 → E2E-PLDO-002 → E2E-PLDO-004 → E2E-PLDO-005
2. E2E-PLDO-009 → E2E-PLDO-010 → E2E-PLDO-011 → E2E-PLDO-012 → E2E-PLDO-013
3. E2E-PLDO-005 → E2E-PLDO-014 → E2E-PLDO-015
4. E2E-PLDO-005 → E2E-PLDO-018 → E2E-PLDO-019

**Doタブ基本機能（依存あり）**:
1. E2E-PLDO-001 → E2E-PLDO-021 → E2E-PLDO-022 → E2E-PLDO-023 → E2E-PLDO-027 → E2E-PLDO-028
2. E2E-PLDO-021 → E2E-PLDO-030 → E2E-PLDO-031 → E2E-PLDO-032 → E2E-PLDO-034 → E2E-PLDO-035
3. E2E-PLDO-021 → E2E-PLDO-036 → E2E-PLDO-037 → E2E-PLDO-038 → E2E-PLDO-039 → E2E-PLDO-040

**異常系・セキュリティ（高優先度）**:
- E2E-PLDO-049, E2E-PLDO-051, E2E-PLDO-053, E2E-PLDO-056
- E2E-PLDO-065, E2E-PLDO-066, E2E-PLDO-067, E2E-PLDO-068, E2E-PLDO-070, E2E-PLDO-071

**レスポンシブ（高優先度）**:
- E2E-PLDO-072, E2E-PLDO-073, E2E-PLDO-074, E2E-PLDO-076

**ワークフロー（高優先度）**:
- E2E-PLDO-082, E2E-PLDO-083, E2E-PLDO-084, E2E-PLDO-086

### 中優先度（推奨テスト）: 27項目

- 進捗率表示、期限表示、優先度バッジ表示
- 目標・タスクの編集（説明、期限変更）
- 削除キャンセル、感情選択デフォルト
- モーダル操作（背景クリック、キャンセルボタン）
- 異常系（空白のみ入力、エラー処理、重複送信防止）
- セキュリティ（CSRF対策）
- レスポンシブ（タッチ操作、モバイルモーダル、長文表示）
- ワークフロー（タブ切り替え、状態保持、長文タイトル）

### 低優先度（任意テスト）: 10項目

- モーダル背景クリック
- 画面回転
- 特殊文字、過去期限、改行表示

## 前提条件

### テスト環境
- ブラウザ: Chrome最新版、Safari最新版、Firefox最新版
- Node.js: v18以上
- Next.js: 15
- React: 18

### テストアカウント（Auth.js実装後）
- 管理者: admin@mentalbase.local / MentalBase2025!Dev
- 一般ユーザー: test@mentalbase.local / MentalBase2025!Dev

### モックデータ
- 初期目標: 2件（「英語力を向上させる」「健康的な生活習慣」）
- 初期タスク: 3件（今日が期限のタスク）
- 感情選択肢: 4種類（😊😐😢😰）

## 実装状態

### 実装済み機能
- ✅ ページレイアウト（タブ切り替え）
- ✅ 目標CRUD操作（作成、表示、編集、削除）
- ✅ タスクCRUD操作（作成、表示、完了切り替え）
- ✅ ログ記録機能（テキスト入力、感情選択）
- ✅ モーダルUI（目標、タスク）
- ✅ ローディング・エラー状態表示
- ✅ レスポンシブ対応（TailwindCSS）

### 未実装機能
- ❌ 認証機能（Auth.js）
- ❌ 実APIエンドポイント（FastAPI）
- ❌ データ永続化（PostgreSQL）
- ❌ エラートースト通知
- ❌ タスク編集機能
- ❌ フィルタ・ソート機能

## 注意事項

### テスト実施上の注意
1. **モックデータの揮発性**: ページリロードでデータがリセットされる
2. **API実装待ち**: 一部のエラーケースはFastAPI実装後にテスト可能
3. **Auth.js実装待ち**: 認証関連テストは実装後に実施
4. **XSS対策**: Reactのデフォルトエスケープに依存（追加検証推奨）

### 既知の制約
- タスク削除UIは未実装（API側は実装済み）
- 目標削除時のカスケード削除はモックサービス内で実装
- ログ記録後のフィードバック表示なし（改善検討）

## テスト実施ガイドライン

### 手動テスト手順
1. 開発サーバー起動: `npm run dev`（ポート3247）
2. ブラウザで`http://localhost:3247/plan-do`にアクセス
3. テスト項目一覧に従い、手順を実施
4. 期待結果と実際の結果を比較
5. 結果を「実施日」「結果」列に記録

### 自動テスト実装（将来）
- Playwright / Cypressによる自動化推奨
- 高優先度テストから自動化
- CI/CDパイプラインに統合

---

**作成者**: E2Eテスト仕様書作成エージェント
**バージョン**: 1.0
**最終更新**: 2025-11-01
