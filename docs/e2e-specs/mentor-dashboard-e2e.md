# M-001: メンターダッシュボード E2Eテスト仕様書

生成日: 2025-11-02
対象ページ: /mentor
テスト環境: モック実装（@MOCK_TO_API）
作成者: E2Eテスト仕様書作成エージェント

## 概要

- 総テスト項目数: 66項目
- 高優先度: 38項目
- 中優先度: 20項目
- 低優先度: 8項目

## テスト項目一覧

### 正常系テスト（27項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-MENTOR-001 | メンターダッシュボードページアクセス | なし | 認可 | 正常系 | 高 | メンターロールでアクセス可能 | 1. メンターロールでログイン<br>2. /mentorにアクセス | ページが正常に表示される | | | DALパターンによる認可確認 |
| 2 | E2E-MENTOR-002 | ページヘッダー表示 | E2E-MENTOR-001 | 表示 | 正常系 | 高 | ヘッダーテキスト表示 | /mentorアクセス後確認 | "メンターダッシュボード"タイトル表示<br>サブテキスト"担当クライアントの進捗を一目で確認"表示 | | | |
| 3 | E2E-MENTOR-003 | 統計サマリー初期表示 | E2E-MENTOR-001 | 表示 | 正常系 | 高 | 4つの統計カード表示 | /mentorアクセス後確認 | 統計カードが2x2グリッドで表示される<br>ローディング状態が表示される | | | |
| 4 | E2E-MENTOR-004 | 統計データ取得成功 | E2E-MENTOR-003 | データ取得 | 正常系 | 高 | API呼び出し成功 | モックAPI: /api/mentor/dashboard | statistics: {totalClients, activeClients, needsFollowUp, averageProgress}表示 | | | @MOCK_TO_API |
| 5 | E2E-MENTOR-005 | 担当クライアント総数表示 | E2E-MENTOR-004 | 表示 | 正常系 | 高 | 総数が正しく表示 | 統計データ取得後確認 | "担当クライアント総数: XX人"形式で表示<br>数値がvar(--primary)色 | | | |
| 6 | E2E-MENTOR-006 | アクティブクライアント数表示 | E2E-MENTOR-004 | 表示 | 正常系 | 高 | アクティブ数が正しく表示 | 統計データ取得後確認 | "アクティブクライアント: XX人"形式で表示<br>数値がvar(--primary)色 | | | |
| 7 | E2E-MENTOR-007 | 要フォロー数表示 | E2E-MENTOR-004 | 表示 | 正常系 | 高 | 要フォロー数が正しく表示 | 統計データ取得後確認 | "要フォロー: XX人"形式で表示<br>数値がvar(--primary)色 | | | |
| 8 | E2E-MENTOR-008 | 平均進捗率表示 | E2E-MENTOR-004 | 表示 | 正常系 | 高 | 平均進捗率が正しく表示 | 統計データ取得後確認 | "平均進捗率: XX%"形式で表示<br>数値がvar(--primary)色<br>小数点以下は四捨五入 | | | |
| 9 | E2E-MENTOR-009 | 検索バー初期表示 | E2E-MENTOR-001 | 表示 | 正常系 | 高 | 検索バーが表示される | /mentorアクセス後確認 | プレースホルダー"クライアントを検索..."表示<br>検索アイコン表示 | | | |
| 10 | E2E-MENTOR-010 | フィルターチップ初期表示 | E2E-MENTOR-001 | 表示 | 正常系 | 高 | フィルターチップ表示 | /mentorアクセス後確認 | "全て"、"順調"、"停滞"、"要フォロー"の4つのチップ表示<br>"全て"がアクティブ状態 | | | |
| 11 | E2E-MENTOR-011 | ソートセレクト初期表示 | E2E-MENTOR-001 | 表示 | 正常系 | 高 | ソートセレクト表示 | /mentorアクセス後確認 | "進捗率順"、"最終活動日順"、"名前順"の3つのオプション表示<br>デフォルト: "進捗率順" | | | |
| 12 | E2E-MENTOR-012 | クライアント一覧初期表示 | E2E-MENTOR-001 | 表示 | 正常系 | 高 | クライアント一覧表示 | モックAPI: /api/mentor/dashboard | クライアントカードが3列グリッドで表示される<br>ローディング状態が表示される | | | |
| 13 | E2E-MENTOR-013 | クライアントカード表示 | E2E-MENTOR-012 | 表示 | 正常系 | 高 | 各カードの情報表示 | クライアントデータ取得後確認 | アバター（またはイニシャル）<br>名前<br>メールアドレス<br>進捗バー<br>進捗率<br>最終活動ラベル<br>ステータスバッジ | | | |
| 14 | E2E-MENTOR-014 | クライアント検索機能 | E2E-MENTOR-012 | 検索 | 正常系 | 高 | 検索フィルタリング | 1. 検索バーに"田中"入力<br>2. リアルタイムフィルタリング確認 | 名前またはメールに"田中"を含むクライアントのみ表示 | | | 大文字小文字を区別しない |
| 15 | E2E-MENTOR-015 | フィルター: 順調 | E2E-MENTOR-012 | フィルター | 正常系 | 高 | ステータスフィルタリング | "順調"チップをクリック | status === 'on_track'のクライアントのみ表示<br>チップがアクティブ状態に変化 | | | |
| 16 | E2E-MENTOR-016 | フィルター: 停滞 | E2E-MENTOR-012 | フィルター | 正常系 | 中 | ステータスフィルタリング | "停滞"チップをクリック | status === 'stagnant'のクライアントのみ表示<br>チップがアクティブ状態に変化 | | | |
| 17 | E2E-MENTOR-017 | フィルター: 要フォロー | E2E-MENTOR-012 | フィルター | 正常系 | 高 | ステータスフィルタリング | "要フォロー"チップをクリック | status === 'needs_followup'のクライアントのみ表示<br>チップがアクティブ状態に変化 | | | |
| 18 | E2E-MENTOR-018 | フィルター: 全て | E2E-MENTOR-015 | フィルター | 正常系 | 中 | フィルター解除 | "全て"チップをクリック | 全クライアント表示<br>チップがアクティブ状態に変化 | | | |
| 19 | E2E-MENTOR-019 | ソート: 進捗率順 | E2E-MENTOR-012 | ソート | 正常系 | 高 | 進捗率降順ソート | ソートセレクトで"進捗率順"選択 | クライアントがoverallProgress降順で表示される | | | |
| 20 | E2E-MENTOR-020 | ソート: 最終活動日順 | E2E-MENTOR-012 | ソート | 正常系 | 高 | 最終活動日降順ソート | ソートセレクトで"最終活動日順"選択 | クライアントがlastActivityDate降順で表示される（新しい順） | | | |
| 21 | E2E-MENTOR-021 | ソート: 名前順 | E2E-MENTOR-012 | ソート | 正常系 | 中 | 名前昇順ソート | ソートセレクトで"名前順"選択 | クライアントが名前の日本語ソート順（あいうえお順）で表示される | | | |
| 22 | E2E-MENTOR-022 | 検索とフィルターの組み合わせ | E2E-MENTOR-014, E2E-MENTOR-015 | 検索・フィルター | 正常系 | 中 | 複数条件フィルタリング | 1. 検索バーに"田"入力<br>2. "順調"チップをクリック | 名前/メールに"田"を含み、かつstatus === 'on_track'のクライアントのみ表示 | | | |
| 23 | E2E-MENTOR-023 | クライアントカードホバー効果 | E2E-MENTOR-013 | UI/UX | 正常系 | 低 | ホバー時のスタイル変化 | クライアントカードにマウスホバー | box-shadow: var(--shadow-md)に変化<br>transform: translateY(-2px)アニメーション | | | |
| 24 | E2E-MENTOR-024 | クライアントカードクリック遷移 | E2E-MENTOR-013 | 遷移 | 正常系 | 高 | クライアント詳細ページ遷移 | クライアントカードをクリック | /mentor/client/[clientId]に遷移 | | | |
| 25 | E2E-MENTOR-025 | 進捗バー色分け: 高進捗 | E2E-MENTOR-013 | 表示 | 正常系 | 中 | 進捗率70%以上の色 | 進捗率70%以上のカード確認 | 進捗バーがvar(--success)色（緑） | | | |
| 26 | E2E-MENTOR-026 | 進捗バー色分け: 中進捗 | E2E-MENTOR-013 | 表示 | 正常系 | 中 | 進捗率40-69%の色 | 進捗率40-69%のカード確認 | 進捗バーがvar(--warning)色（黄） | | | |
| 27 | E2E-MENTOR-027 | 進捗バー色分け: 低進捗 | E2E-MENTOR-013 | 表示 | 正常系 | 中 | 進捗率39%以下の色 | 進捗率39%以下のカード確認 | 進捗バーがvar(--error)色（赤） | | | |

### 異常系テスト（15項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 28 | E2E-MENTOR-028 | 統計データ取得失敗 | E2E-MENTOR-003 | エラー | 異常系 | 高 | APIエラー時の挙動 | モックAPIでエラーレスポンス返却 | コンソールにエラーログ出力<br>統計カードは初期値（0）で表示 | | | |
| 29 | E2E-MENTOR-029 | クライアントデータ取得失敗 | E2E-MENTOR-012 | エラー | 異常系 | 高 | APIエラー時の挙動 | モックAPIでエラーレスポンス返却 | コンソールにエラーログ出力<br>クライアント一覧は空配列で表示 | | | |
| 30 | E2E-MENTOR-030 | クライアントデータなし | E2E-MENTOR-012 | 表示 | 異常系 | 中 | 空状態の表示 | モックAPIで空配列返却 | "クライアントがいません"メッセージ表示<br>"クライアントを招待して始めましょう"サブメッセージ表示<br>ユーザーアイコン表示 | | | |
| 31 | E2E-MENTOR-031 | 検索結果なし | E2E-MENTOR-014 | 表示 | 異常系 | 中 | 検索結果が0件の表示 | 検索バーに存在しない名前入力 | "クライアントがいません"メッセージ表示<br>"条件に一致するクライアントが見つかりませんでした"サブメッセージ表示 | | | |
| 32 | E2E-MENTOR-032 | フィルター結果なし | E2E-MENTOR-015 | 表示 | 異常系 | 中 | フィルター結果が0件の表示 | 該当ステータスのクライアントが0件の場合 | "クライアントがいません"メッセージ表示<br>"条件に一致するクライアントが見つかりませんでした"サブメッセージ表示 | | | |
| 33 | E2E-MENTOR-033 | 検索入力: 空白のみ | E2E-MENTOR-014 | バリデーション | 異常系 | 低 | 空白入力時の挙動 | 検索バーに空白のみ入力 | 全クライアント表示（フィルタリングなし） | | | |
| 34 | E2E-MENTOR-034 | 検索入力: 特殊文字 | E2E-MENTOR-014 | バリデーション | 異常系 | 中 | 特殊文字入力時の挙動 | 検索バーに"<script>"等入力 | XSSが発生しない<br>該当するクライアントが表示されない | | | |
| 35 | E2E-MENTOR-035 | 統計データ不正形式 | E2E-MENTOR-004 | エラー | 異常系 | 中 | 不正データ時の挙動 | モックAPIで不正形式データ返却 | エラーハンドリング<br>初期値（0）で表示 | | | |
| 36 | E2E-MENTOR-036 | クライアントデータ不正形式 | E2E-MENTOR-012 | エラー | 異常系 | 中 | 不正データ時の挙動 | モックAPIで不正形式データ返却 | エラーハンドリング<br>空状態表示 | | | |
| 37 | E2E-MENTOR-037 | 進捗率が範囲外（負の値） | E2E-MENTOR-013 | データ検証 | 異常系 | 低 | 異常値時の表示 | overallProgress: -10 | 進捗バーが0%表示<br>エラーが発生しない | | | |
| 38 | E2E-MENTOR-038 | 進捗率が範囲外（100超） | E2E-MENTOR-013 | データ検証 | 異常系 | 低 | 異常値時の表示 | overallProgress: 150 | 進捗バーが100%表示<br>エラーが発生しない | | | |
| 39 | E2E-MENTOR-039 | アバター画像読み込み失敗 | E2E-MENTOR-013 | エラー | 異常系 | 低 | 画像エラー時の挙動 | avatarUrlが無効なURL | イニシャル表示にフォールバック<br>エラーが発生しない | | | |
| 40 | E2E-MENTOR-040 | lastActivityDateが未来日付 | E2E-MENTOR-013 | データ検証 | 異常系 | 低 | 異常値時の表示 | lastActivityDate: 未来の日付 | 正常に表示される（計算ロジック次第） | | | |
| 41 | E2E-MENTOR-041 | ネットワーク切断 | E2E-MENTOR-001 | エラー | 異常系 | 中 | ネットワークエラー | ページ読み込み後にネットワーク切断 | タイムアウト後にエラーハンドリング<br>ユーザーフレンドリーなエラーメッセージ | | | |
| 42 | E2E-MENTOR-042 | APIタイムアウト | E2E-MENTOR-004 | エラー | 異常系 | 中 | タイムアウト処理 | モックAPIで遅延レスポンス（30秒超） | タイムアウトエラー発生<br>エラーメッセージ表示 | | | |

### セキュリティテスト（10項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 43 | E2E-MENTOR-043 | ロール検証: CLIENT | なし | 認可 | セキュリティ | 高 | CLIENTロールアクセス拒否 | 1. CLIENTロールでログイン<br>2. /mentorにアクセス | /unauthorizedにリダイレクト<br>または403エラー | | | verifyMentor()による検証 |
| 44 | E2E-MENTOR-044 | ロール検証: 未認証 | なし | 認可 | セキュリティ | 高 | 未認証アクセス拒否 | 1. ログアウト状態<br>2. /mentorにアクセス | /authにリダイレクト<br>verifySession()で拒否 | | | DALパターン |
| 45 | E2E-MENTOR-045 | XSS対策: 検索バー | E2E-MENTOR-014 | セキュリティ | セキュリティ | 高 | XSS攻撃対策 | 検索バーに"<script>alert('XSS')</script>"入力 | スクリプトが実行されない<br>文字列として表示される | | | |
| 46 | E2E-MENTOR-046 | XSS対策: クライアント名 | E2E-MENTOR-013 | セキュリティ | セキュリティ | 高 | XSS攻撃対策 | クライアント名に"<img src=x onerror=alert('XSS')>"を含むデータ | スクリプトが実行されない<br>エスケープされた文字列として表示 | | | |
| 47 | E2E-MENTOR-047 | CSRF対策 | E2E-MENTOR-001 | セキュリティ | セキュリティ | 中 | CSRF保護確認 | CSRFトークンなしでAPIリクエスト | リクエストが拒否される | | | Auth.js実装時 |
| 48 | E2E-MENTOR-048 | セッション検証 | E2E-MENTOR-001 | セキュリティ | セキュリティ | 高 | セッションの有効性確認 | 1. ログイン<br>2. セッション期限切れ<br>3. ページ操作 | /authにリダイレクト<br>または401エラー | | | verifySession()による検証 |
| 49 | E2E-MENTOR-049 | 他メンターのクライアント情報漏洩防止 | E2E-MENTOR-012 | セキュリティ | セキュリティ | 高 | データアクセス制御 | 1. メンターAでログイン<br>2. /mentorアクセス | メンターAの担当クライアントのみ表示<br>他メンターのクライアントは表示されない | | | |
| 50 | E2E-MENTOR-050 | URLパラメータ操作防止 | E2E-MENTOR-004 | セキュリティ | セキュリティ | 中 | パラメータ改ざん対策 | /mentor?mentorId=<他メンターのID>でアクセス | セッションのuserIdのみ使用<br>URLパラメータは無視される | | | |
| 51 | E2E-MENTOR-051 | SQL Injection対策 | E2E-MENTOR-014 | セキュリティ | セキュリティ | 高 | SQLインジェクション対策 | 検索バーに"'; DROP TABLE users; --"入力 | SQLインジェクションが発生しない<br>Prisma ORMによる自動エスケープ | | | |
| 52 | E2E-MENTOR-052 | API認証ヘッダー検証 | E2E-MENTOR-004 | セキュリティ | セキュリティ | 中 | 認証ヘッダー必須確認 | 認証ヘッダーなしでAPIリクエスト | 401 Unauthorizedエラー | | | |

### レスポンシブテスト（8項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 53 | E2E-MENTOR-053 | デスクトップ表示（1920x1080） | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 高 | デスクトップ最適表示 | ビューポート: 1920x1080<br>/mentorアクセス | 統計カード: 2x2グリッド<br>クライアント一覧: 3列グリッド<br>すべての要素が適切に表示 | | | |
| 54 | E2E-MENTOR-054 | タブレット表示（1200px以下） | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 高 | タブレット表示調整 | ビューポート: 1024x768<br>/mentorアクセス | 統計カード: 2x2グリッド<br>クライアント一覧: 2列グリッド（@media max-width: 1200px） | | | |
| 55 | E2E-MENTOR-055 | モバイル表示（768px以下） | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 高 | モバイル表示調整 | ビューポート: 375x667<br>/mentorアクセス | 統計カード: 1列グリッド（@media max-width: 768px）<br>クライアント一覧: 1列グリッド | | | |
| 56 | E2E-MENTOR-056 | 検索バーのレスポンシブ | E2E-MENTOR-009 | レスポンシブ | レスポンシブ | 中 | モバイルでの検索バー | ビューポート: 375x667 | 検索バーが画面幅に収まる<br>フィルターチップが折り返し表示（flex-wrap） | | | |
| 57 | E2E-MENTOR-057 | フィルターチップの折り返し | E2E-MENTOR-010 | レスポンシブ | レスポンシブ | 中 | 小画面での折り返し | ビューポート: 375x667 | フィルターチップが適切に折り返し表示 | | | |
| 58 | E2E-MENTOR-058 | ソートセレクトの位置調整 | E2E-MENTOR-011 | レスポンシブ | レスポンシブ | 中 | 小画面での位置 | ビューポート: 375x667 | ソートセレクトが適切に配置される（ml-auto） | | | |
| 59 | E2E-MENTOR-059 | 横向き表示（667x375） | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 低 | 横向き対応 | ビューポート: 667x375<br>/mentorアクセス | すべての要素が表示される<br>スクロール可能 | | | |
| 60 | E2E-MENTOR-060 | 極小画面（320x568） | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 低 | 極小画面対応 | ビューポート: 320x568<br>/mentorアクセス | すべての要素が表示される<br>レイアウト崩れなし | | | |

### ワークフローテスト（6項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 61 | E2E-MENTOR-061 | ワークフロー: 初回アクセス | E2E-MENTOR-001 | ワークフロー | ワークフロー | 高 | 初回利用の全体フロー | 1. メンターロールでログイン<br>2. /mentorアクセス<br>3. 統計とクライアント一覧確認 | すべてのデータが正常に表示される<br>ローディング→データ表示の遷移がスムーズ | | | |
| 62 | E2E-MENTOR-062 | ワークフロー: 検索からクライアント詳細 | E2E-MENTOR-014, E2E-MENTOR-024 | ワークフロー | ワークフロー | 高 | 検索→詳細表示フロー | 1. 検索バーでクライアント検索<br>2. 該当クライアントカードクリック<br>3. 詳細ページ表示確認 | 検索結果からクライアント詳細に正常遷移 | | | |
| 63 | E2E-MENTOR-063 | ワークフロー: フィルター→ソート→検索 | E2E-MENTOR-015, E2E-MENTOR-019, E2E-MENTOR-014 | ワークフロー | ワークフロー | 中 | 複合条件フィルタリング | 1. "要フォロー"フィルター選択<br>2. "進捗率順"ソート選択<br>3. 検索バーで名前検索 | 複数条件が同時に適用される<br>結果が正しく表示される | | | |
| 64 | E2E-MENTOR-064 | ワークフロー: データなし→招待 | E2E-MENTOR-030 | ワークフロー | ワークフロー | 低 | クライアントなし時のフロー | 1. クライアント0件の状態<br>2. "クライアントを招待して始めましょう"メッセージ確認 | 空状態メッセージが適切に表示される | | | 将来: 招待ボタン追加予定 |
| 65 | E2E-MENTOR-065 | ワークフロー: エラーからの回復 | E2E-MENTOR-028 | ワークフロー | ワークフロー | 中 | エラー回復フロー | 1. APIエラー発生<br>2. ページリロード<br>3. データ再取得確認 | リロード後に正常にデータが表示される | | | |
| 66 | E2E-MENTOR-066 | ワークフロー: ブラウザバック | E2E-MENTOR-024 | ワークフロー | ワークフロー | 中 | ブラウザバック対応 | 1. クライアント詳細ページ遷移<br>2. ブラウザバックボタン<br>3. ダッシュボード表示確認 | ダッシュボードに戻る<br>検索・フィルター状態が保持される（理想） | | | 状態保持はオプション |

## テスト分類別カバレッジ

- **正常系**: 27項目
  - ページアクセス、表示、データ取得、検索、フィルター、ソート、UI/UX、遷移
- **異常系**: 15項目
  - APIエラー、空状態、バリデーション、データ検証、ネットワークエラー
- **セキュリティ**: 10項目
  - 認可、XSS、CSRF、セッション、データアクセス制御、SQL Injection
- **レスポンシブ**: 8項目
  - デスクトップ、タブレット、モバイル、横向き、極小画面
- **ワークフロー**: 6項目
  - 初回アクセス、検索→詳細、複合フィルタリング、エラー回復、ブラウザバック

## API呼び出し一覧

| No | メソッド | エンドポイント | 用途 | テストID | 備考 |
|----|---------|--------------|------|----------|------|
| 1 | GET | /api/mentor/dashboard?mentorId={mentorId} | 統計データ取得 | E2E-MENTOR-004 | @MOCK_TO_API |
| 2 | GET | /api/mentor/dashboard?mentorId={mentorId} | クライアント一覧取得 | E2E-MENTOR-012 | @MOCK_TO_API |

## 優先度別実施順序

### 高優先度（必須）: 38項目

**認可・セキュリティ（依存なし）**:
- E2E-MENTOR-001: メンターダッシュボードページアクセス
- E2E-MENTOR-043: ロール検証: CLIENT
- E2E-MENTOR-044: ロール検証: 未認証

**表示・データ取得（依存: E2E-MENTOR-001）**:
- E2E-MENTOR-002: ページヘッダー表示
- E2E-MENTOR-003: 統計サマリー初期表示
- E2E-MENTOR-004: 統計データ取得成功
- E2E-MENTOR-005: 担当クライアント総数表示
- E2E-MENTOR-006: アクティブクライアント数表示
- E2E-MENTOR-007: 要フォロー数表示
- E2E-MENTOR-008: 平均進捗率表示
- E2E-MENTOR-009: 検索バー初期表示
- E2E-MENTOR-010: フィルターチップ初期表示
- E2E-MENTOR-011: ソートセレクト初期表示
- E2E-MENTOR-012: クライアント一覧初期表示
- E2E-MENTOR-013: クライアントカード表示

**検索・フィルター・ソート**:
- E2E-MENTOR-014: クライアント検索機能
- E2E-MENTOR-015: フィルター: 順調
- E2E-MENTOR-017: フィルター: 要フォロー
- E2E-MENTOR-019: ソート: 進捗率順
- E2E-MENTOR-020: ソート: 最終活動日順

**遷移**:
- E2E-MENTOR-024: クライアントカードクリック遷移

**エラーハンドリング**:
- E2E-MENTOR-028: 統計データ取得失敗
- E2E-MENTOR-029: クライアントデータ取得失敗

**セキュリティ**:
- E2E-MENTOR-045: XSS対策: 検索バー
- E2E-MENTOR-046: XSS対策: クライアント名
- E2E-MENTOR-048: セッション検証
- E2E-MENTOR-049: 他メンターのクライアント情報漏洩防止
- E2E-MENTOR-051: SQL Injection対策

**レスポンシブ**:
- E2E-MENTOR-053: デスクトップ表示（1920x1080）
- E2E-MENTOR-054: タブレット表示（1200px以下）
- E2E-MENTOR-055: モバイル表示（768px以下）

**ワークフロー**:
- E2E-MENTOR-061: ワークフロー: 初回アクセス
- E2E-MENTOR-062: ワークフロー: 検索からクライアント詳細

### 中優先度（推奨）: 20項目

- E2E-MENTOR-016: フィルター: 停滞
- E2E-MENTOR-018: フィルター: 全て
- E2E-MENTOR-021: ソート: 名前順
- E2E-MENTOR-022: 検索とフィルターの組み合わせ
- E2E-MENTOR-025 ~ E2E-MENTOR-027: 進捗バー色分け
- E2E-MENTOR-030 ~ E2E-MENTOR-032: 空状態表示
- E2E-MENTOR-034 ~ E2E-MENTOR-036: バリデーション・エラー
- E2E-MENTOR-041 ~ E2E-MENTOR-042: ネットワークエラー
- E2E-MENTOR-047: CSRF対策
- E2E-MENTOR-050: URLパラメータ操作防止
- E2E-MENTOR-052: API認証ヘッダー検証
- E2E-MENTOR-056 ~ E2E-MENTOR-058: レスポンシブ詳細
- E2E-MENTOR-063: ワークフロー: フィルター→ソート→検索
- E2E-MENTOR-065 ~ E2E-MENTOR-066: ワークフロー: エラー回復、ブラウザバック

### 低優先度（任意）: 8項目

- E2E-MENTOR-023: クライアントカードホバー効果
- E2E-MENTOR-033: 検索入力: 空白のみ
- E2E-MENTOR-037 ~ E2E-MENTOR-040: データ検証（エッジケース）
- E2E-MENTOR-039: アバター画像読み込み失敗
- E2E-MENTOR-059 ~ E2E-MENTOR-060: レスポンシブ（極小画面）
- E2E-MENTOR-064: ワークフロー: データなし→招待

## 前提条件

### テストアカウント

**メンター**:
- メールアドレス: mentor@mentalbase.local
- パスワード: MentorTest2025!
- ロール: MENTOR

**クライアント**:
- メールアドレス: client@mentalbase.local
- パスワード: ClientTest2025!
- ロール: CLIENT

**管理者**（将来対応）:
- メールアドレス: admin@mentalbase.local
- パスワード: AdminTest2025!
- ロール: ADMIN

### テストデータ

**統計データ（モック）**:
```json
{
  "statistics": {
    "totalClients": 12,
    "activeClients": 9,
    "needsFollowUp": 3,
    "averageProgress": 68.5
  }
}
```

**クライアントデータ（モック）**:
```json
{
  "clients": [
    {
      "id": "client-001",
      "name": "田中太郎",
      "email": "tanaka@example.com",
      "avatarUrl": null,
      "initials": "田",
      "overallProgress": 85,
      "lastActivityDate": "2025-11-02T10:00:00Z",
      "lastActivityLabel": "今日",
      "status": "on_track",
      "relationshipId": "rel-001"
    },
    {
      "id": "client-002",
      "name": "佐藤花子",
      "email": "sato@example.com",
      "avatarUrl": null,
      "initials": "佐",
      "overallProgress": 45,
      "lastActivityDate": "2025-10-28T15:30:00Z",
      "lastActivityLabel": "5日前",
      "status": "stagnant",
      "relationshipId": "rel-002"
    },
    {
      "id": "client-003",
      "name": "鈴木一郎",
      "email": "suzuki@example.com",
      "avatarUrl": null,
      "initials": "鈴",
      "overallProgress": 28,
      "lastActivityDate": "2025-10-23T08:00:00Z",
      "lastActivityLabel": "10日前",
      "status": "needs_followup",
      "relationshipId": "rel-003"
    }
  ]
}
```

### 環境要件

- Node.js: 18.17以上
- ブラウザ: Chrome、Firefox、Safari、Edge（最新版）
- テストフレームワーク: Playwright
- モックAPI: MSW（Mock Service Worker）または Next.js API Routes

## 実装状況

- **実装完了**: 2025-11-02
  - ページコンポーネント: `app/(protected)/mentor/page.tsx`
  - 統計コンポーネント: `components/mentor/DashboardStats.tsx`
  - クライアント一覧: `components/mentor/ClientList.tsx`
  - 検索フィルター: `components/mentor/SearchFilter.tsx`
  - クライアントカード: `components/mentor/ClientCard.tsx`
  - 型定義: `types/index.ts`
  - DAL（認可）: `lib/dal.ts`

- **未実装**:
  - モックAPI実装（@MOCK_TO_APIマーク箇所）
  - E2Eテスト（Playwright）
  - クライアント招待機能
  - 実際のデータベース接続

## 注意事項

### テスト実施時の注意

1. **認可テスト**: `verifyMentor()`による検証が正しく動作することを確認
2. **@MOCK_TO_API**: モックAPIを先に実装し、本番API実装後に置き換え
3. **日本語ソート**: `localeCompare('ja')`を使用した日本語ソートの動作確認
4. **XSS対策**: React自動エスケープに加え、`dangerouslySetInnerHTML`を使用していないことを確認
5. **レスポンシブ**: Tailwind CSSのgrid-cols-*が正しくブレークポイントで切り替わることを確認
6. **イニシャル生成**: 日本語名（最初の1文字）と英語名（各単語の頭文字）の両方をテスト

### 既知の制約

- クライアント招待機能は将来実装予定（現在は空状態メッセージのみ）
- プッシュ通知機能は将来実装予定
- クライアントデータのリアルタイム更新は将来実装予定

### デザインシステム準拠

すべてのコンポーネントはデザインシステムのCSS変数を使用:
- `var(--primary)`: プライマリカラー
- `var(--secondary)`: セカンダリカラー
- `var(--success)`: 成功・順調
- `var(--warning)`: 警告・停滞
- `var(--error)`: エラー・要フォロー
- `var(--background)`: 背景色
- `var(--surface)`: サーフェス色
- `var(--text-primary)`: プライマリテキスト
- `var(--text-secondary)`: セカンダリテキスト
- `var(--shadow-sm)`: 小シャドウ
- `var(--shadow-md)`: 中シャドウ

---

**最終更新**: 2025-11-02
**次回更新予定**: モックAPI実装完了後
