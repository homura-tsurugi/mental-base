# AIアシスタントページE2Eテスト仕様書

生成日: 2025-11-01
対象ページ: /ai-assistant
テスト環境: モック実装
作成者: E2Eテスト仕様書作成エージェント

## 概要

- **総テスト項目数**: 50項目
- **高優先度**: 25項目
- **中優先度**: 18項目
- **低優先度**: 7項目

### テスト分類別カバレッジ

- **正常系**: 24項目
- **異常系**: 10項目
- **セキュリティ**: 6項目
- **レスポンシブ**: 5項目
- **ワークフロー・エッジケース**: 5項目

---

## テスト項目一覧

### 正常系テスト（24項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-AIA-001 | AIアシスタントページ初期アクセス | なし | ページ表示 | 正常系 | 高 | ページが正常に読み込まれる | 1. `/ai-assistant`にアクセス | ページが表示され、モード選択ボタンが4つ表示される | | | |
| 2 | E2E-AIA-002 | 初期モード選択状態 | E2E-AIA-001 | モード選択 | 正常系 | 高 | デフォルトで課題解決モードが選択されている | 1. ページアクセス時 | 「課題解決モード」ボタンがアクティブ状態（青背景、白文字）で表示 | | | |
| 3 | E2E-AIA-003 | モードオプション表示 | E2E-AIA-001 | モード選択 | 正常系 | 高 | 4つのモードが正しく表示される | 1. ページ読み込み後、モード選択エリアを確認 | 「課題解決モード」「学習支援モード」「計画立案モード」「伴走補助モード」の4つが表示され、各モードにアイコンが表示される | | | |
| 4 | E2E-AIA-004 | チャット履歴初期表示 | E2E-AIA-001 | チャット表示 | 正常系 | 高 | 初期チャット履歴が表示される | 1. ページ読み込み後、チャット履歴エリアを確認 | モックデータの5件のメッセージが表示される（assistant→user→assistant→user→assistantの順） | | | |
| 5 | E2E-AIA-005 | チャット履歴なし状態表示 | E2E-AIA-001 | チャット表示 | 正常系 | 中 | チャット履歴がない場合の表示 | 1. チャット履歴をクリアした状態でアクセス | 「メッセージを送信して会話を始めましょう」というプレースホルダーが表示される | | | |
| 6 | E2E-AIA-006 | ユーザーメッセージの表示スタイル | E2E-AIA-004 | チャット表示 | 正常系 | 高 | ユーザーメッセージが右寄せで表示される | 1. チャット履歴内のユーザーメッセージを確認 | メッセージが右寄せ、青背景、白文字、角丸の吹き出しで表示される | | | |
| 7 | E2E-AIA-007 | AIメッセージの表示スタイル | E2E-AIA-004 | チャット表示 | 正常系 | 高 | AIメッセージが左寄せで表示される | 1. チャット履歴内のAIメッセージを確認 | メッセージが左寄せ、白背景、黒文字、角丸の吹き出しで表示される | | | |
| 8 | E2E-AIA-008 | タイムスタンプ表示 | E2E-AIA-004 | チャット表示 | 正常系 | 中 | 各メッセージにタイムスタンプが表示される | 1. チャット履歴内のメッセージを確認 | 各メッセージの下にHH:mm形式のタイムスタンプが表示される | | | |
| 9 | E2E-AIA-009 | メッセージ入力フィールド表示 | E2E-AIA-001 | メッセージ送信 | 正常系 | 高 | 入力フィールドが正常に表示される | 1. ページ下部の入力エリアを確認 | 「メッセージを入力...」というプレースホルダー付きの入力フィールドと送信ボタンが表示される | | | |
| 10 | E2E-AIA-010 | メッセージ入力 | E2E-AIA-009 | メッセージ送信 | 正常系 | 高 | テキスト入力が可能 | 1. 入力フィールドに「こんにちは」と入力 | テキストが入力フィールドに表示される | | | |
| 11 | E2E-AIA-011 | 送信ボタンクリックでメッセージ送信 | E2E-AIA-010 | メッセージ送信 | 正常系 | 高 | 送信ボタンでメッセージが送信される | 1. 「こんにちは」と入力<br>2. 送信ボタンをクリック | 1. 入力フィールドがクリアされる<br>2. ユーザーメッセージがチャット履歴に追加される<br>3. 1秒後にAI応答が追加される | | | |
| 12 | E2E-AIA-012 | Enterキーでメッセージ送信 | E2E-AIA-010 | メッセージ送信 | 正常系 | 高 | Enterキーでメッセージが送信される | 1. 「テストメッセージ」と入力<br>2. Enterキーを押下 | 1. 入力フィールドがクリアされる<br>2. ユーザーメッセージがチャット履歴に追加される<br>3. AI応答が追加される | | | |
| 13 | E2E-AIA-013 | 送信中のローディング表示 | E2E-AIA-011 | メッセージ送信 | 正常系 | 高 | 送信中はローディングアイコンが表示される | 1. メッセージを送信<br>2. AI応答待機中のボタンを確認 | 送信ボタンのアイコンがrefresh（回転アニメーション）に変わる | | | |
| 14 | E2E-AIA-014 | 送信中のボタン無効化 | E2E-AIA-011 | メッセージ送信 | 正常系 | 高 | 送信中は入力フィールドと送信ボタンが無効化される | 1. メッセージを送信<br>2. AI応答待機中の入力フィールドとボタンを確認 | 入力フィールドがグレーアウト、送信ボタンが無効化（グレー背景） | | | |
| 15 | E2E-AIA-015 | AI応答の受信と表示 | E2E-AIA-011 | メッセージ送信 | 正常系 | 高 | AI応答が正常に表示される | 1. 「こんにちは」と送信<br>2. 1秒後のチャット履歴を確認 | AI応答メッセージがチャット履歴に左寄せで追加される | | | |
| 16 | E2E-AIA-016 | チャット履歴の自動スクロール | E2E-AIA-015 | チャット表示 | 正常系 | 高 | 新しいメッセージ追加時に自動スクロールされる | 1. メッセージを送信<br>2. AI応答受信後のスクロール位置を確認 | チャット履歴が最下部にスクロールされる | | | |
| 17 | E2E-AIA-017 | モード切り替え（学習支援） | E2E-AIA-001 | モード選択 | 正常系 | 高 | 学習支援モードに切り替え可能 | 1. 「学習支援モード」ボタンをクリック | 1. ボタンがアクティブ状態になる<br>2. チャット履歴が学習支援モード用に更新される | | | |
| 18 | E2E-AIA-018 | モード切り替え（計画立案） | E2E-AIA-001 | モード選択 | 正常系 | 高 | 計画立案モードに切り替え可能 | 1. 「計画立案モード」ボタンをクリック | 1. ボタンがアクティブ状態になる<br>2. チャット履歴が計画立案モード用に更新される | | | |
| 19 | E2E-AIA-019 | モード切り替え（伴走補助） | E2E-AIA-001 | モード選択 | 正常系 | 高 | 伴走補助モードに切り替え可能 | 1. 「伴走補助モード」ボタンをクリック | 1. ボタンがアクティブ状態になる<br>2. チャット履歴が伴走補助モード用に更新される | | | |
| 20 | E2E-AIA-020 | モード切り替え時のチャット履歴更新 | E2E-AIA-017 | モード選択 | 正常系 | 高 | モード変更時に該当モードの履歴のみ表示される | 1. 課題解決モードでメッセージを送信<br>2. 学習支援モードに切り替え | 課題解決モードのメッセージは非表示、学習支援モードのメッセージのみ表示される | | | |
| 21 | E2E-AIA-021 | メッセージのフェードインアニメーション | E2E-AIA-011 | チャット表示 | 正常系 | 中 | 新規メッセージがアニメーション付きで表示される | 1. メッセージを送信<br>2. 新規メッセージの表示を確認 | メッセージが0.3秒のフェードイン＋上から下へのスライドアニメーションで表示される | | | |
| 22 | E2E-AIA-022 | 長文メッセージの折り返し表示 | E2E-AIA-011 | チャット表示 | 正常系 | 中 | 長文が正しく折り返される | 1. 200文字以上の長文を送信 | メッセージが吹き出し内で折り返され、全文が表示される | | | |
| 23 | E2E-AIA-023 | 改行を含むメッセージの表示 | E2E-AIA-011 | チャット表示 | 正常系 | 中 | 改行が正しく反映される | 1. 「こんにちは\n今日はいい天気ですね」と送信 | メッセージ内の改行が保持され、複数行で表示される | | | |
| 24 | E2E-AIA-024 | ローディング状態表示 | なし | ページ表示 | 正常系 | 高 | 初期読み込み中のローディング表示 | 1. ページアクセス時の初期読み込み状態を確認 | 「読み込み中...」のテキストが中央に表示される | | | |

---

### 異常系テスト（10項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 25 | E2E-AIA-025 | 空白メッセージの送信防止 | E2E-AIA-009 | メッセージ送信 | 異常系 | 高 | 空白のみのメッセージは送信できない | 1. 入力フィールドに半角スペースのみ入力<br>2. 送信ボタンをクリック | 送信ボタンが無効化されており、クリックしても何も起こらない | | | |
| 26 | E2E-AIA-026 | 送信中の重複送信防止 | E2E-AIA-011 | メッセージ送信 | 異常系 | 高 | 送信中は新しいメッセージを送信できない | 1. メッセージを送信<br>2. AI応答待機中に別のメッセージを入力して送信を試みる | 送信ボタンが無効化されており、送信できない | | | |
| 27 | E2E-AIA-027 | API接続エラー表示 | E2E-AIA-001 | エラー表示 | 異常系 | 高 | API接続エラー時のエラー表示 | 1. APIサービスを停止<br>2. ページにアクセス | 赤背景のエラーメッセージ「エラーが発生しました: [エラー詳細]」が表示される | | | モック環境では再現困難 |
| 28 | E2E-AIA-028 | メッセージ送信失敗時のエラー表示 | E2E-AIA-011 | メッセージ送信 | 異常系 | 高 | メッセージ送信失敗時のエラーハンドリング | 1. メッセージを送信<br>2. APIエラーをシミュレート | 1. 送信ボタンが再度有効化される<br>2. エラーメッセージが表示される（将来実装） | | | 現在エラートースト未実装 |
| 29 | E2E-AIA-029 | ネットワーク切断時の挙動 | E2E-AIA-001 | エラー表示 | 異常系 | 中 | ネットワーク切断時のエラー表示 | 1. ネットワーク接続を切断<br>2. ページアクセスまたはメッセージ送信 | エラーメッセージが表示される | | | |
| 30 | E2E-AIA-030 | APIタイムアウト処理 | E2E-AIA-011 | メッセージ送信 | 異常系 | 中 | 長時間応答がない場合のタイムアウト | 1. API応答を30秒以上遅延させる<br>2. メッセージを送信 | タイムアウトエラーが表示される（将来実装） | | | 現在タイムアウト処理未実装 |
| 31 | E2E-AIA-031 | 不正なモードパラメータ | E2E-AIA-001 | モード選択 | 異常系 | 低 | 存在しないモードを指定した場合 | 1. URLに`?mode=invalid`を付けてアクセス | デフォルトの課題解決モードが選択される | | | |
| 32 | E2E-AIA-032 | 非常に長いメッセージの送信 | E2E-AIA-011 | メッセージ送信 | 異常系 | 中 | 文字数制限テスト | 1. 5000文字以上のメッセージを送信 | 1. メッセージが正常に送信される<br>2. チャット履歴で正しく表示される（スクロール可能） | | | API側で文字数制限実装予定 |
| 33 | E2E-AIA-033 | XSS攻撃テスト（メッセージ内容） | E2E-AIA-011 | メッセージ送信 | 異常系 | 高 | スクリプトタグが無害化される | 1. `<script>alert('XSS')</script>` を送信 | スクリプトが実行されず、文字列としてエスケープ表示される | | | |
| 34 | E2E-AIA-034 | チャット履歴取得失敗 | E2E-AIA-001 | チャット表示 | 異常系 | 中 | 履歴取得APIエラー時の表示 | 1. 履歴取得APIをエラーにする<br>2. モードを切り替え | エラーメッセージが表示される | | | |

---

### セキュリティテスト（6項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 35 | E2E-AIA-035 | 認証なしアクセス | なし | 認証 | セキュリティ | 高 | 未ログイン時のリダイレクト | 1. ログアウト状態で`/ai-assistant`にアクセス | `/auth`にリダイレクトされる | | | Auth.js実装待ち |
| 36 | E2E-AIA-036 | セッション期限切れ | E2E-AIA-001 | 認証 | セキュリティ | 高 | セッション切れ時のリダイレクト | 1. ページアクセス後、セッションを期限切れにする<br>2. メッセージを送信 | ログインページにリダイレクトされる | | | Auth.js実装待ち |
| 37 | E2E-AIA-037 | CSRF攻撃対策 | E2E-AIA-011 | メッセージ送信 | セキュリティ | 中 | CSRFトークン検証 | 1. CSRFトークンなしでメッセージ送信APIを呼び出す | リクエストが拒否される | | | Auth.js実装時に自動対応 |
| 38 | E2E-AIA-038 | XSS攻撃対策（AI応答） | E2E-AIA-015 | チャット表示 | セキュリティ | 高 | AI応答内のスクリプトが無害化される | 1. AI応答に`<img src=x onerror=alert('XSS')>`が含まれる場合 | スクリプトが実行されず、エスケープ表示される | | | |
| 39 | E2E-AIA-039 | 他ユーザーのチャット履歴アクセス防止 | E2E-AIA-001 | データアクセス | セキュリティ | 高 | ユーザーIDフィルタリング | 1. ユーザーAでログイン<br>2. チャット履歴を取得 | ユーザーAの履歴のみ表示され、他ユーザーの履歴は表示されない | | | API側で実装 |
| 40 | E2E-AIA-040 | APIエンドポイント直接アクセス防止 | なし | API | セキュリティ | 中 | 認証なしAPI呼び出しの拒否 | 1. 未認証で`/api/ai-assistant/chat/send`を呼び出す | 401 Unauthorizedエラーが返される | | | FastAPI実装時 |

---

### レスポンシブテスト（5項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 41 | E2E-AIA-041 | デスクトップ表示（1920x1080） | E2E-AIA-001 | レスポンシブ | レスポンシブ | 高 | デスクトップサイズでの表示 | 1. ブラウザを1920x1080にリサイズ<br>2. ページを確認 | 1. モード選択ボタンが横並びで表示<br>2. チャット吹き出しが最大幅75%<br>3. 入力エリアが最大幅600px中央配置 | | | |
| 42 | E2E-AIA-042 | タブレット表示（768x1024） | E2E-AIA-001 | レスポンシブ | レスポンシブ | 高 | タブレットサイズでの表示 | 1. ブラウザを768x1024にリサイズ<br>2. ページを確認 | 1. モード選択ボタンが横スクロール可能<br>2. チャット履歴が見やすく表示<br>3. 入力エリアが画面幅いっぱい | | | |
| 43 | E2E-AIA-043 | モバイル表示（375x667） | E2E-AIA-001 | レスポンシブ | レスポンシブ | 高 | モバイルサイズでの表示 | 1. ブラウザを375x667にリサイズ<br>2. ページを確認 | 1. モード選択ボタンが横スクロール<br>2. チャット吹き出しが画面幅の75%<br>3. 入力エリアが画面下部固定<br>4. テキストサイズが読みやすい | | | |
| 44 | E2E-AIA-044 | モバイルでのタッチ操作 | E2E-AIA-043 | レスポンシブ | レスポンシブ | 中 | タッチスクロール、タップ操作 | 1. モバイルサイズでページアクセス<br>2. モード選択エリアをスワイプ<br>3. チャット履歴をスクロール<br>4. メッセージを送信 | 全ての操作がスムーズに動作する | | | |
| 45 | E2E-AIA-045 | 縦向き・横向き切り替え | E2E-AIA-043 | レスポンシブ | レスポンシブ | 低 | 画面回転時のレイアウト調整 | 1. モバイルで縦向き表示<br>2. 横向きに回転 | レイアウトが崩れず、全要素が正しく表示される | | | |

---

### ワークフロー・エッジケーステスト（5項目）

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 46 | E2E-AIA-046 | 連続メッセージ送信 | E2E-AIA-011 | メッセージ送信 | ワークフロー | 高 | 複数のメッセージを連続送信 | 1. 「メッセージ1」を送信<br>2. AI応答を待つ<br>3. 「メッセージ2」を送信<br>4. AI応答を待つ<br>5. チャット履歴を確認 | 全てのメッセージとAI応答が正しい順序で表示される | | | |
| 47 | E2E-AIA-047 | モード切り替え中のメッセージ保持 | E2E-AIA-020 | モード選択 | ワークフロー | 中 | モード切り替え後に元のモードに戻る | 1. 課題解決モードでメッセージを送信<br>2. 学習支援モードに切り替え<br>3. 課題解決モードに戻る | 最初に送信したメッセージが履歴に残っている | | | |
| 48 | E2E-AIA-048 | ページリロード後の状態保持 | E2E-AIA-011 | データ永続化 | ワークフロー | 中 | リロード後もチャット履歴が保持される | 1. メッセージを送信<br>2. ページをリロード | 1. 送信したメッセージが履歴に表示される<br>2. 選択していたモードが保持される（現在は未実装） | | | localStorage実装予定 |
| 49 | E2E-AIA-049 | 非常に長いチャット履歴のスクロール | E2E-AIA-046 | チャット表示 | エッジケース | 低 | 50件以上のメッセージ表示 | 1. 50件以上のメッセージがある状態<br>2. チャット履歴をスクロール | スムーズにスクロールでき、パフォーマンス劣化がない | | | 仮想スクロール検討 |
| 50 | E2E-AIA-050 | 特殊文字を含むメッセージ | E2E-AIA-011 | メッセージ送信 | エッジケース | 中 | 絵文字、特殊記号の表示 | 1. 「こんにちは😊🎉✨」を送信<br>2. 「&lt;>&"'」を送信 | 全ての文字が正しく表示される | | | |

---

## API呼び出し一覧

| No | メソッド | エンドポイント | 用途 | テストID | @MOCK_TO_API |
|----|---------|--------------|------|----------|--------------|
| 1 | GET | /api/ai-assistant/modes | モード情報取得 | E2E-AIA-003 | ✅ getModeOptions() |
| 2 | GET | /api/ai-assistant/chat/history | チャット履歴取得 | E2E-AIA-004, E2E-AIA-020 | ✅ getChatHistory() |
| 3 | POST | /api/ai-assistant/chat/send | メッセージ送信 | E2E-AIA-011, E2E-AIA-012 | ✅ sendMessage() |
| 4 | GET | /api/ai-assistant/page-data | ページ初期データ取得 | E2E-AIA-001 | ✅ getPageData() |
| 5 | DELETE | /api/ai-assistant/chat/history | チャット履歴クリア（開発用） | - | ✅ clearChatHistory() |

### API内部処理（requirements.md参照）

#### AIA-001: チャット履歴取得（getChatHistory）
1. 指定されたmodeのチャット履歴を取得
2. ページネーション処理（limit, cursor）
3. createdAtの降順でソート
4. hasMoreフラグとnextCursorを計算

#### AIA-002: メッセージ送信（sendMessage）
1. ユーザーメッセージをChatMessageテーブルに保存
2. ユーザーのコンテキスト情報を取得（最新の目標、タスク、ログ、振り返り）
3. AI API（Claude or OpenAI）を呼び出し
   - システムプロンプトにモード固有の指示を含める
   - コンテキスト情報をプロンプトに含める
4. AI応答をChatMessageテーブルに保存
5. AI応答をレスポンスとして返却

---

## 優先度別実施順序

### 高優先度（必須）- 25項目

**依存関係なし（最優先）**:
- E2E-AIA-001: AIアシスタントページ初期アクセス
- E2E-AIA-024: ローディング状態表示
- E2E-AIA-035: 認証なしアクセス（Auth.js実装待ち）
- E2E-AIA-027: API接続エラー表示

**依存あり（実行順）**:
1. **ページ表示系**: E2E-AIA-001 → E2E-AIA-002 → E2E-AIA-003 → E2E-AIA-004
2. **チャット表示系**: E2E-AIA-004 → E2E-AIA-006 → E2E-AIA-007
3. **メッセージ送信系**: E2E-AIA-009 → E2E-AIA-010 → E2E-AIA-011 → E2E-AIA-013 → E2E-AIA-014 → E2E-AIA-015 → E2E-AIA-016
4. **モード切り替え系**: E2E-AIA-001 → E2E-AIA-017 → E2E-AIA-018 → E2E-AIA-019 → E2E-AIA-020
5. **異常系**: E2E-AIA-025, E2E-AIA-026, E2E-AIA-028, E2E-AIA-033
6. **セキュリティ**: E2E-AIA-036, E2E-AIA-038, E2E-AIA-039
7. **レスポンシブ**: E2E-AIA-041, E2E-AIA-042, E2E-AIA-043
8. **ワークフロー**: E2E-AIA-046

### 中優先度（推奨）- 18項目

- E2E-AIA-005, E2E-AIA-008, E2E-AIA-021, E2E-AIA-022, E2E-AIA-023
- E2E-AIA-029, E2E-AIA-030, E2E-AIA-032, E2E-AIA-034
- E2E-AIA-037, E2E-AIA-040
- E2E-AIA-044
- E2E-AIA-047, E2E-AIA-048, E2E-AIA-050

### 低優先度（任意）- 7項目

- E2E-AIA-031
- E2E-AIA-045
- E2E-AIA-049

---

## 前提条件

### テストアカウント
- **ユーザー**: user1（モックデータで固定）
  - 初期チャット履歴5件（課題解決モード）
  - すべてのモードにアクセス可能

### テスト環境
- **フロントエンド**: `http://localhost:3247`
- **モックサービス**: `lib/services/AIAssistantService.ts`
- **カスタムフック**: `hooks/useAIAssistant.ts`

### データ準備
- モックチャット履歴は`AIAssistantService`内で管理
- 各モードの初期メッセージは`getModeOptions()`で定義
- AI応答は`generateMockAIResponse()`でモード別に生成

---

## 実装時の注意事項

### API実装への移行

現在モック実装されている以下のメソッドは、FastAPI実装時に対応するエンドポイントに置き換える必要があります：

1. **getModeOptions()** → `GET /api/ai-assistant/modes`
2. **getChatHistory()** → `GET /api/ai-assistant/chat/history?mode={mode}&limit={limit}&cursor={cursor}`
3. **sendMessage()** → `POST /api/ai-assistant/chat/send`
4. **getPageData()** → `GET /api/ai-assistant/page-data?mode={mode}`
5. **clearChatHistory()** → `DELETE /api/ai-assistant/chat/history`（開発用）

### セキュリティ実装

- **認証**: Auth.js (NextAuth v5) のData Access Layer (DAL)パターンを使用
- **CSRF対策**: Auth.js実装時に自動対応
- **XSS対策**: Reactのデフォルトエスケープに加え、DOMPurifyの導入検討
- **API認証**: すべてのAPIエンドポイントでセッション検証必須

### パフォーマンス最適化

- **長いチャット履歴**: 仮想スクロール（react-window）の導入検討
- **AI API呼び出し**: タイムアウト30秒、リトライ最大3回（exponential backoff）
- **チャット履歴取得**: ページネーション（limit=50）でパフォーマンス維持

### AI API設定（requirements.md参照）

- **開発環境**: Claude 3.5 Sonnet（Free Tier: 5 req/min、$10上限）
- **本番環境**: OpenAI GPT-4o mini（Tier 1: 500 req/min）
- **タイムアウト**: 30秒
- **コンテキスト最大長**: Claude 200K tokens、GPT-4o mini 128K tokens

---

## 備考

### 既知の制約事項

1. **Auth.js未実装**: E2E-AIA-035, E2E-AIA-036はAuth.js実装待ち
2. **エラートースト未実装**: E2E-AIA-028でエラーメッセージ表示機能が将来実装予定
3. **タイムアウト処理未実装**: E2E-AIA-030は将来実装予定
4. **localStorage未実装**: E2E-AIA-048のモード状態保持は将来実装予定

### モック環境での制約

- API接続エラー（E2E-AIA-027）はモック環境では再現困難
- 実際のAI応答は`generateMockAIResponse()`で固定テンプレート返却
- ページネーション（hasMore、nextCursor）は常にfalse/undefined

### 将来的な拡張

- 音声入力機能
- 画像添付機能
- チャット履歴のエクスポート
- お気に入りメッセージ機能
- AI応答の評価機能（Good/Bad）
