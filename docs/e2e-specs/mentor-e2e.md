# Mentor Dashboard E2Eテスト仕様書

生成日: 2025-11-02
対象ページ: /mentor (メンターダッシュボード)
テスト環境: モック実装
作成者: E2Eテスト仕様書作成エージェント

## 概要

- 総テスト項目数: 48項目
- 高優先度: 22項目
- 中優先度: 18項目
- 低優先度: 8項目

## 分析対象ファイル

- app/(protected)/mentor/page.tsx
- components/mentor/DashboardStats.tsx
- components/mentor/ClientList.tsx
- components/mentor/ClientCard.tsx
- components/mentor/SearchFilter.tsx
- lib/dal.ts

## ログイン設計方針

### 認証ガード検出結果
**認証要否: 必須**

- 認証ガード: `verifyMentor()` (lib/dal.ts)
- 必要ロール: MENTOR
- リダイレクト先: /auth (ロールが不足している場合)

### ログイン方法

#### パターンA: E2Eテスト用認証スキップ（推奨）
```typescript
// 環境変数設定
process.env.VITE_SKIP_AUTH = 'true'

// モックセッション（lib/dal.ts）
{
  userId: 'test-user-id',
  userEmail: 'test@mentalbase.local',
  userName: 'Test User',
  userRole: 'client' // ⚠️ デフォルトはclient
}
```

**⚠️ 重要**: VITE_SKIP_AUTH=true のデフォルトロールは `client` のため、メンターページテストには不十分。以下の対応が必要:
1. lib/dal.ts の getMockSession() を修正して userRole: 'mentor' にする
2. または、テストごとにロールを動的に変更できる仕組みを追加
3. または、パターンBの実ログインを使用

#### パターンB: 実ログイン
```typescript
// テストアカウント（メンターロール）
email: mentor@mentalbase.local
password: MentalBase2025!Mentor
role: mentor
```

### テスト前提条件
- メンターロールを持つユーザーでログイン済み
- 最低1件以上のクライアント関係が存在（active status）
- データベースに統計データが存在

## ファイル分割計画

**分割必要性: 必要**（48項目 > 30項目のため）

### ファイル構成

```
docs/e2e-specs/mentor/
├── mentor-e2e-main.md          # 統合テーブル（全48項目）- このファイル
├── mentor-basic.spec.md        # 基本表示（15項目）
├── mentor-stats.spec.md        # 統計表示（8項目）
├── mentor-search.spec.md       # 検索・フィルタ（10項目）
├── mentor-client-card.spec.md  # クライアントカード（8項目）
└── mentor-security.spec.md     # セキュリティ・エラー（7項目）
```

### 分割方針
1. **mentor-basic.spec.md**: ページアクセス、基本レイアウト、ナビゲーション
2. **mentor-stats.spec.md**: DashboardStatsコンポーネントの統計表示
3. **mentor-search.spec.md**: SearchFilterコンポーネントの検索・フィルタ・ソート機能
4. **mentor-client-card.spec.md**: ClientCardコンポーネントの表示とインタラクション
5. **mentor-security.spec.md**: 認証・認可、エラーハンドリング

## テスト項目一覧

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-MENTOR-001 | メンターダッシュボード初期アクセス | なし | ページアクセス | 正常系 | 高 | メンターロールでページが正常に表示される | 1. メンターアカウントでログイン<br>2. ブラウザで`http://localhost:3247/mentor`にアクセス | ・メンターダッシュボードページが表示<br>・「メンターダッシュボード」見出し表示<br>・エラーなし | | | |
| 2 | E2E-MENTOR-002 | メンターロール検証 | なし | 認証・認可 | セキュリティ | 高 | メンターロールが必須 | 1. クライアントロールのユーザーでログイン<br>2. `/mentor`にアクセス | ・アクセス拒否<br>・`/auth`にリダイレクト<br>・verifyMentor()が機能 | | | DAL検証 |
| 3 | E2E-MENTOR-003 | 未認証アクセス拒否 | なし | 認証・認可 | セキュリティ | 高 | 未認証ユーザーのアクセス制御 | 1. 未ログイン状態で`/mentor`にアクセス | ・アクセス拒否<br>・`/auth`にリダイレクト<br>・エラーメッセージ表示 | | | 認証未実装時はスキップ |
| 4 | E2E-MENTOR-004 | ページヘッダー表示 | E2E-MENTOR-001 | 基本表示 | 正常系 | 高 | ページヘッダーが正しく表示される | 1. メンターダッシュボードにアクセス<br>2. ヘッダー部分を確認 | ・「メンターダッシュボード」見出し（text-3xl）<br>・サブテキスト「担当クライアントの進捗状況を一目で確認」<br>・白背景、ボーダー下部 | | | |
| 5 | E2E-MENTOR-005 | クライアント招待ボタン表示 | E2E-MENTOR-001 | 基本表示 | 正常系 | 高 | クライアント招待ボタンが表示される | 1. ヘッダー右上を確認 | ・「クライアント招待」ボタン表示<br>・青背景（bg-blue-600）<br>・ホバーで色変更（hover:bg-blue-700） | | | |
| 6 | E2E-MENTOR-006 | クライアント招待ボタンクリック | E2E-MENTOR-005 | ボタンクリック | 正常系 | 中 | クライアント招待ボタンがクリック可能 | 1. 「クライアント招待」ボタンをクリック | ・ボタンがクリック可能<br>・現在は何も実行されない（将来実装予定） | | | 将来機能 |
| 7 | E2E-MENTOR-007 | 統計サマリーセクション表示 | E2E-MENTOR-001 | 基本表示 | 正常系 | 高 | DashboardStatsコンポーネントが表示される | 1. メンターダッシュボードにアクセス<br>2. 統計サマリーセクションを確認 | ・4つの統計カード表示<br>・グリッドレイアウト（grid-cols-4）<br>・mentorIdがプロップとして渡される | | | |
| 8 | E2E-MENTOR-008 | 統計カード: 担当クライアント | E2E-MENTOR-007 | 統計表示 | 正常系 | 高 | 担当クライアント数が表示される | 1. 統計サマリーを確認<br>2. 最初のカードを確認 | ・ラベル「担当クライアント」表示<br>・数値表示（例: 5人）<br>・青背景（bg-blue-50）<br>・青文字（text-blue-700） | | | |
| 9 | E2E-MENTOR-009 | 統計カード: 今週アクティブ | E2E-MENTOR-007 | 統計表示 | 正常系 | 高 | 今週アクティブなクライアント数が表示される | 1. 統計サマリーを確認<br>2. 2番目のカードを確認 | ・ラベル「今週アクティブ」表示<br>・数値表示（例: 3人）<br>・緑背景（bg-green-50）<br>・緑文字（text-green-700） | | | |
| 10 | E2E-MENTOR-010 | 統計カード: 要フォロー | E2E-MENTOR-007 | 統計表示 | 正常系 | 高 | 要フォローのクライアント数が表示される | 1. 統計サマリーを確認<br>2. 3番目のカードを確認 | ・ラベル「要フォロー」表示<br>・数値表示（例: 2人）<br>・黄背景（bg-amber-50）<br>・黄文字（text-amber-700） | | | |
| 11 | E2E-MENTOR-011 | 統計カード: 平均進捗率 | E2E-MENTOR-007 | 統計表示 | 正常系 | 高 | 全クライアントの平均進捗率が表示される | 1. 統計サマリーを確認<br>2. 4番目のカードを確認 | ・ラベル「平均進捗率」表示<br>・数値表示（例: 65%）<br>・紫背景（bg-purple-50）<br>・紫文字（text-purple-700） | | | |
| 12 | E2E-MENTOR-012 | 統計データローディング表示 | E2E-MENTOR-001 | ローディング | 正常系 | 高 | 統計データ取得中のローディング表示 | 1. ページアクセス時<br>2. API応答前の状態を確認 | ・4つのスケルトンカード表示<br>・animate-pulse アニメーション<br>・灰色のプレースホルダー | | | |
| 13 | E2E-MENTOR-013 | 統計データAPI呼び出し | E2E-MENTOR-007 | API呼び出し | 正常系 | 高 | 統計データが正しく取得される | 1. DevToolsネットワークタブを開く<br>2. ページアクセス | ・GET `/api/mentor/dashboard?mentorId={id}`呼び出し<br>・response.statistics にデータあり<br>・エラーなし | | | |
| 14 | E2E-MENTOR-014 | 検索・フィルターセクション表示 | E2E-MENTOR-001 | 基本表示 | 正常系 | 高 | SearchFilterコンポーネントが表示される | 1. メンターダッシュボードにアクセス<br>2. 検索・フィルターセクションを確認 | ・検索バー表示<br>・フィルターボタン4つ（全て、順調、停滞、要フォロー）<br>・ソートドロップダウン表示 | | | |
| 15 | E2E-MENTOR-015 | 検索バー表示 | E2E-MENTOR-014 | 検索機能 | 正常系 | 高 | 検索バーが正しく表示される | 1. 検索・フィルターセクションを確認 | ・プレースホルダー「クライアント名で検索...」<br>・テキスト入力可能<br>・focus時にリング表示（focus:ring-blue-500） | | | |
| 16 | E2E-MENTOR-016 | 検索バー入力 | E2E-MENTOR-015 | 検索機能 | 正常系 | 高 | 検索バーに文字入力できる | 1. 検索バーをクリック<br>2. 「太郎」と入力 | ・入力値が表示される<br>・リアルタイムで検索（onChange）<br>・クライアント一覧がフィルタされる | | | |
| 17 | E2E-MENTOR-017 | フィルターボタン表示 | E2E-MENTOR-014 | フィルター機能 | 正常系 | 高 | フィルターボタンが正しく表示される | 1. フィルターボタン群を確認 | ・「全て」「順調」「停滞」「要フォロー」の4ボタン<br>・デフォルトは「全て」が選択（bg-blue-600） | | | |
| 18 | E2E-MENTOR-018 | フィルター: 順調 | E2E-MENTOR-017 | フィルター機能 | 正常系 | 中 | 順調フィルターが機能する | 1. 「順調」ボタンをクリック | ・ボタンが青背景に変更<br>・status='on_track'のクライアントのみ表示<br>・他のクライアントは非表示 | | | |
| 19 | E2E-MENTOR-019 | フィルター: 停滞 | E2E-MENTOR-017 | フィルター機能 | 正常系 | 中 | 停滞フィルターが機能する | 1. 「停滞」ボタンをクリック | ・ボタンが青背景に変更<br>・status='stagnant'のクライアントのみ表示<br>・他のクライアントは非表示 | | | |
| 20 | E2E-MENTOR-020 | フィルター: 要フォロー | E2E-MENTOR-017 | フィルター機能 | 正常系 | 中 | 要フォローフィルターが機能する | 1. 「要フォロー」ボタンをクリック | ・ボタンが青背景に変更<br>・status='needs_followup'のクライアントのみ表示<br>・他のクライアントは非表示 | | | |
| 21 | E2E-MENTOR-021 | フィルター: 全て | E2E-MENTOR-018 | フィルター機能 | 正常系 | 中 | 全てフィルターでフィルタ解除 | 1. フィルター適用後<br>2. 「全て」ボタンをクリック | ・ボタンが青背景に変更<br>・全クライアントが表示される<br>・フィルタが解除される | | | |
| 22 | E2E-MENTOR-022 | ソートドロップダウン表示 | E2E-MENTOR-014 | ソート機能 | 正常系 | 高 | ソートドロップダウンが表示される | 1. ソートドロップダウンを確認 | ・「最終活動日順」がデフォルト選択<br>・「進捗率順」「名前順」オプションあり<br>・select要素 | | | |
| 23 | E2E-MENTOR-023 | ソート: 最終活動日順 | E2E-MENTOR-022 | ソート機能 | 正常系 | 高 | 最終活動日順でソートされる | 1. デフォルト状態を確認 | ・最終活動日が新しいクライアントから順に表示<br>・lastActivityDate降順 | | | |
| 24 | E2E-MENTOR-024 | ソート: 進捗率順 | E2E-MENTOR-022 | ソート機能 | 正常系 | 中 | 進捗率順でソートされる | 1. 「進捗率順」を選択 | ・進捗率が高いクライアントから順に表示<br>・overallProgress降順 | | | |
| 25 | E2E-MENTOR-025 | ソート: 名前順 | E2E-MENTOR-022 | ソート機能 | 正常系 | 中 | 名前順でソートされる | 1. 「名前順」を選択 | ・クライアント名が50音順に表示<br>・日本語ロケール対応（'ja'） | | | |
| 26 | E2E-MENTOR-026 | クライアント一覧表示 | E2E-MENTOR-001 | 基本表示 | 正常系 | 高 | ClientListコンポーネントが表示される | 1. メンターダッシュボードにアクセス<br>2. クライアント一覧セクションを確認 | ・クライアントカードがグリッド表示<br>・最大3列（lg:grid-cols-3）<br>・mentorIdがプロップとして渡される | | | |
| 27 | E2E-MENTOR-027 | クライアント件数表示 | E2E-MENTOR-026 | データ表示 | 正常系 | 中 | クライアント件数が表示される | 1. クライアント一覧上部を確認 | ・「○件のクライアント」テキスト表示<br>・フィルター適用時は「(フィルター適用中)」追加 | | | |
| 28 | E2E-MENTOR-028 | クライアントカード表示 | E2E-MENTOR-026 | データ表示 | 正常系 | 高 | クライアントカードが正しく表示される | 1. クライアント一覧を確認<br>2. 最初のカードを確認 | ・クライアント名、メールアドレス表示<br>・アバターまたはイニシャル表示<br>・ステータスバッジ表示<br>・進捗バー表示<br>・最終活動日表示 | | | |
| 29 | E2E-MENTOR-029 | クライアント名・メール表示 | E2E-MENTOR-028 | データ表示 | 正常系 | 高 | クライアント名とメールが表示される | 1. クライアントカードを確認 | ・名前が太字（font-semibold）<br>・メールアドレスが灰色（text-gray-500）<br>・適切なフォントサイズ | | | |
| 30 | E2E-MENTOR-030 | クライアントアバター表示 | E2E-MENTOR-028 | データ表示 | 正常系 | 中 | アバターが正しく表示される | 1. avatarUrl有りのクライアントを確認 | ・画像が丸型（rounded-full）で表示<br>・w-12 h-12サイズ<br>・object-cover適用 | | | |
| 31 | E2E-MENTOR-031 | クライアントイニシャル表示 | E2E-MENTOR-028 | データ表示 | 正常系 | 中 | イニシャルが正しく表示される | 1. avatarUrlなしのクライアントを確認 | ・名前から生成されたイニシャル表示（最大2文字）<br>・青背景（bg-blue-600）<br>・白文字、太字 | | | |
| 32 | E2E-MENTOR-032 | ステータスバッジ: 順調 | E2E-MENTOR-028 | データ表示 | 正常系 | 高 | 順調ステータスバッジが表示される | 1. status='on_track'のクライアントを確認 | ・「順調」バッジ表示<br>・緑背景（bg-green-100）<br>・緑文字（text-green-800） | | | |
| 33 | E2E-MENTOR-033 | ステータスバッジ: 停滞 | E2E-MENTOR-028 | データ表示 | 正常系 | 高 | 停滞ステータスバッジが表示される | 1. status='stagnant'のクライアントを確認 | ・「停滞」バッジ表示<br>・黄背景（bg-amber-100）<br>・黄文字（text-amber-800） | | | |
| 34 | E2E-MENTOR-034 | ステータスバッジ: 要フォロー | E2E-MENTOR-028 | データ表示 | 正常系 | 高 | 要フォローステータスバッジが表示される | 1. status='needs_followup'のクライアントを確認 | ・「要フォロー」バッジ表示<br>・赤背景（bg-red-100）<br>・赤文字（text-red-800） | | | |
| 35 | E2E-MENTOR-035 | 進捗バー表示 | E2E-MENTOR-028 | データ表示 | 正常系 | 高 | 進捗バーが正しく表示される | 1. クライアントカードの進捗バーを確認 | ・「総合進捗率」ラベル表示<br>・進捗率パーセント表示<br>・プログレスバー表示<br>・進捗に応じた色（緑/黄/赤） | | | |
| 36 | E2E-MENTOR-036 | 進捗バー色: 高進捗 | E2E-MENTOR-035 | データ表示 | 正常系 | 中 | 高進捗時の色が緑 | 1. 進捗率70%以上のクライアントを確認 | ・プログレスバーが緑色（bg-green-500） | | | |
| 37 | E2E-MENTOR-037 | 進捗バー色: 中進捗 | E2E-MENTOR-035 | データ表示 | 正常系 | 中 | 中進捗時の色が黄 | 1. 進捗率40-69%のクライアントを確認 | ・プログレスバーが黄色（bg-amber-500） | | | |
| 38 | E2E-MENTOR-038 | 進捗バー色: 低進捗 | E2E-MENTOR-035 | データ表示 | 正常系 | 中 | 低進捗時の色が赤 | 1. 進捗率39%以下のクライアントを確認 | ・プログレスバーが赤色（bg-red-500） | | | |
| 39 | E2E-MENTOR-039 | 最終活動日表示 | E2E-MENTOR-028 | データ表示 | 正常系 | 高 | 最終活動日が相対時間で表示される | 1. クライアントカードの最終活動日を確認 | ・時計アイコン表示<br>・「最終活動: ○日前」形式<br>・0日前は「今日」、1日前は「昨日」<br>・7日以上は日付表示 | | | |
| 40 | E2E-MENTOR-040 | クライアントカードクリック | E2E-MENTOR-028 | ナビゲーション | 正常系 | 高 | クライアントカードがクリック可能 | 1. クライアントカードをクリック | ・`/mentor/client/{clientId}`に遷移<br>・カードがリンク（Link）として機能<br>・ホバー時にシャドウ強化（hover:shadow-md） | | | |
| 41 | E2E-MENTOR-041 | クライアントなし状態表示 | E2E-MENTOR-001 | 空データ | 正常系 | 中 | クライアントが0件の場合の表示 | 1. モックデータを空配列に変更<br>2. メンターダッシュボードにアクセス | ・「クライアントがいません」メッセージ表示<br>・アイコン表示<br>・「クライアントを招待して始めましょう」テキスト表示 | | | モック変更必要 |
| 42 | E2E-MENTOR-042 | 検索結果なし表示 | E2E-MENTOR-016 | 空データ | 正常系 | 中 | 検索結果が0件の場合の表示 | 1. 存在しないクライアント名で検索 | ・「クライアントがいません」メッセージ表示<br>・「条件に一致するクライアントが見つかりませんでした」テキスト表示 | | | |
| 43 | E2E-MENTOR-043 | クライアントデータローディング表示 | E2E-MENTOR-001 | ローディング | 正常系 | 高 | クライアントデータ取得中のローディング表示 | 1. ページアクセス時<br>2. API応答前の状態を確認 | ・6つのスケルトンカード表示<br>・animate-pulse アニメーション<br>・灰色のプレースホルダー | | | |
| 44 | E2E-MENTOR-044 | クライアントデータAPI呼び出し | E2E-MENTOR-026 | API呼び出し | 正常系 | 高 | クライアントデータが正しく取得される | 1. DevToolsネットワークタブを開く<br>2. ページアクセス | ・GET `/api/mentor/dashboard?mentorId={id}`呼び出し<br>・response.clients にデータあり<br>・エラーなし | | | 統計APIと同じエンドポイント |
| 45 | E2E-MENTOR-045 | API接続エラー表示 | なし | エラー処理 | 異常系 | 高 | API接続エラー時のエラー処理 | 1. モックAPIでエラーをthrow<br>2. ページアクセス | ・console.errorにエラー出力<br>・エラーステート設定<br>・ユーザーにエラー通知（実装予定） | | | エラー通知UI未実装 |
| 46 | E2E-MENTOR-046 | レスポンシブ: デスクトップ | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 高 | デスクトップ表示の確認 | 1. ブラウザを1920x1080にリサイズ<br>2. メンターダッシュボードを確認 | ・統計カードが4列（lg:grid-cols-4）<br>・クライアントカードが3列（lg:grid-cols-3）<br>・適切な余白（px-8、py-8） | | | |
| 47 | E2E-MENTOR-047 | レスポンシブ: タブレット | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 中 | タブレット表示の確認 | 1. ブラウザを768x1024にリサイズ<br>2. メンターダッシュボードを確認 | ・統計カードが2列（md:grid-cols-2）<br>・クライアントカードが2列（md:grid-cols-2）<br>・タッチ操作が可能 | | | |
| 48 | E2E-MENTOR-048 | レスポンシブ: モバイル | E2E-MENTOR-001 | レスポンシブ | レスポンシブ | 中 | モバイル表示の確認 | 1. ブラウザを375x667にリサイズ<br>2. メンターダッシュボードを確認 | ・統計カードが1列（grid-cols-1）<br>・クライアントカードが1列（grid-cols-1）<br>・横スクロールなし<br>・タッチターゲット44px以上 | | | |

## テスト分類別カバレッジ

- 正常系: 36項目（75%）
  - ページアクセス、基本表示、統計表示、検索・フィルタ・ソート、クライアント表示、ナビゲーション、空データ
- 異常系: 1項目（2%）
  - API エラー処理
- セキュリティ: 2項目（4%）
  - 認証・認可、ロール検証
- レスポンシブ: 3項目（6%）
  - デスクトップ、タブレット、モバイル
- ローディング: 2項目（4%）
  - 統計ローディング、クライアントローディング
- API呼び出し: 2項目（4%）
  - 統計API、クライアントAPI
- ボタンクリック: 1項目（2%）
  - クライアント招待ボタン
- データ表示: 1項目（2%）
  - クライアント件数

## API呼び出し一覧

| No | メソッド | エンドポイント | 用途 | テストID | モック実装 |
|----|---------|--------------|------|----------|-----------|
| 1 | GET | /api/mentor/dashboard?mentorId={id} | メンターダッシュボードデータ取得（統計+クライアント） | E2E-MENTOR-013, 044 | 要実装 |
| 2 | POST | /api/mentor/invite | クライアント招待（将来実装） | E2E-MENTOR-006 | 未実装 |

## 優先度別実施順序

### 高優先度（必須）: 22項目
実施順序（依存関係に基づく）:
1. E2E-MENTOR-002（メンターロール検証）- 依存なし、セキュリティ重要
2. E2E-MENTOR-003（未認証アクセス拒否）- 依存なし、セキュリティ重要
3. E2E-MENTOR-001（メンターダッシュボード初期アクセス）- 依存なし
4. E2E-MENTOR-004（ページヘッダー表示）
5. E2E-MENTOR-005（クライアント招待ボタン表示）
6. E2E-MENTOR-007（統計サマリーセクション表示）
7. E2E-MENTOR-012（統計データローディング表示）
8. E2E-MENTOR-013（統計データAPI呼び出し）
9. E2E-MENTOR-008（統計カード: 担当クライアント）
10. E2E-MENTOR-009（統計カード: 今週アクティブ）
11. E2E-MENTOR-010（統計カード: 要フォロー）
12. E2E-MENTOR-011（統計カード: 平均進捗率）
13. E2E-MENTOR-014（検索・フィルターセクション表示）
14. E2E-MENTOR-015（検索バー表示）
15. E2E-MENTOR-016（検索バー入力）
16. E2E-MENTOR-017（フィルターボタン表示）
17. E2E-MENTOR-022（ソートドロップダウン表示）
18. E2E-MENTOR-023（ソート: 最終活動日順）
19. E2E-MENTOR-026（クライアント一覧表示）
20. E2E-MENTOR-028（クライアントカード表示）
21. E2E-MENTOR-029（クライアント名・メール表示）
22. E2E-MENTOR-032-034（ステータスバッジ表示）
23. E2E-MENTOR-035（進捗バー表示）
24. E2E-MENTOR-039（最終活動日表示）
25. E2E-MENTOR-040（クライアントカードクリック）
26. E2E-MENTOR-043（クライアントデータローディング表示）
27. E2E-MENTOR-044（クライアントデータAPI呼び出し）
28. E2E-MENTOR-045（API接続エラー表示）
29. E2E-MENTOR-046（レスポンシブ: デスクトップ）

### 中優先度（推奨）: 18項目
実施順序:
1. E2E-MENTOR-006（クライアント招待ボタンクリック）
2. E2E-MENTOR-018-021（フィルター機能）
3. E2E-MENTOR-024-025（ソート機能）
4. E2E-MENTOR-027（クライアント件数表示）
5. E2E-MENTOR-030-031（アバター・イニシャル表示）
6. E2E-MENTOR-036-038（進捗バー色）
7. E2E-MENTOR-041（クライアントなし状態表示）
8. E2E-MENTOR-042（検索結果なし表示）
9. E2E-MENTOR-047（レスポンシブ: タブレット）
10. E2E-MENTOR-048（レスポンシブ: モバイル）

### 低優先度（任意）: 8項目
該当なし（すべて中優先度以上）

## 前提条件

### テストアカウント
- メンターアカウント:
  - Email: mentor@mentalbase.local
  - Password: MentalBase2025!Mentor
  - Role: mentor
  - ID: mentor-user-id

### テストデータ
- 統計データ:
  - 担当クライアント: 5人
  - 今週アクティブ: 3人
  - 要フォロー: 2人
  - 平均進捗率: 65%
- クライアント一覧: 最低5件（異なるステータス、進捗率）
  - 順調（on_track）: 2件
  - 停滞（stagnant）: 2件
  - 要フォロー（needs_followup）: 1件

### テスト環境
- ブラウザ: Chrome, Safari, Firefox最新版
- 画面サイズ: 1920x1080（デスクトップ）、768x1024（タブレット）、375x667（モバイル）
- ネットワーク: 高速、低速、オフライン
- 開発サーバー: http://localhost:3247
- 認証モード: VITE_SKIP_AUTH=true（テスト時）

## 実装されている機能

### 完全実装済み
- メンターダッシュボードページ基本レイアウト
- ページヘッダー（見出し、サブテキスト）
- クライアント招待ボタン（UI のみ）
- DashboardStatsコンポーネント（統計サマリー）
- 統計カード4種類（担当クライアント、今週アクティブ、要フォロー、平均進捗率）
- 統計データローディング表示（スケルトン）
- SearchFilterコンポーネント（検索、フィルタ、ソート）
- ClientListコンポーネント（クライアント一覧）
- ClientCardコンポーネント（クライアントカード）
- クライアントカード詳細（名前、メール、アバター、ステータス、進捗、最終活動日）
- ステータスバッジ（順調、停滞、要フォロー）
- 進捗バー（色分け）
- 最終活動日相対時間表示
- クライアントなし状態表示
- 検索結果なし表示
- クライアントデータローディング表示（スケルトン）
- レスポンシブデザイン
- メンターロール検証（verifyMentor）

### 未実装（将来対応）
- クライアント招待機能
- API実装（/api/mentor/dashboard）
- エラー通知UI
- クライアント詳細ページ（/mentor/client/[id]）
- データリフレッシュボタン
- ページネーション（クライアント数が多い場合）
- クライアントカードのソート保存（ユーザー設定）

## セキュリティ考慮事項

### 現在の実装
1. **ロールベース認証**: verifyMentor()による厳密なロール検証
2. **Data Access Layer（DAL）パターン**: Middlewareを使わないセキュアな認証
3. **認証スキップモード**: E2Eテスト用のVITE_SKIP_AUTH環境変数

### 実装予定の対策
- メンター-クライアント関係の検証
- データアクセス権限の検証（ClientDataAccessPermission）
- データ閲覧ログ記録（ClientDataViewLog）
- CSRF対策（Auth.js）
- Rate Limiting（API レベル）

### 注意事項
⚠️ **E2Eテスト時のロール問題**: VITE_SKIP_AUTH=true のデフォルトロールは `client` のため、メンターページテストには以下の対応が必要:
1. lib/dal.ts の getMockSession() を修正
2. または、テスト用の環境変数 VITE_MOCK_USER_ROLE=mentor を追加
3. または、実際にメンターアカウントでログインする

## パフォーマンス考慮事項

### 現在の実装
- モックAPIのdelay: 500ms（想定）
- React Hooks（useState、useEffect）によるデータ管理
- コンポーネント分割による最適化準備
- useEffectによるフィルタリング・ソート（クライアント側）

### 最適化予定
- React Queryによるキャッシング
- Server Side Renderingの活用（統計データ）
- 仮想スクロール（クライアント数が多い場合）
- 検索・フィルタのデバウンス処理
- Lighthouseスコア90+目標

## テスト実行ガイド

### 手動テスト手順
1. 開発サーバー起動: `npm run dev`
2. メンターアカウントでログイン
3. ブラウザで http://localhost:3247/mentor にアクセス
4. 本仕様書のテスト項目を順次実行
5. 結果を「実施日」「結果」列に記録

### E2Eテスト用認証スキップ設定
```bash
# .env.local に追加
VITE_SKIP_AUTH=true
VITE_MOCK_USER_ROLE=mentor  # 追加推奨
```

### 自動テスト準備（Phase 5）
- Playwright / CypressによるE2Eテスト
- テストコード配置: `e2e/mentor/mentor-*.spec.ts`
- CI/CD統合（GitHub Actions）

## 備考

- 本仕様書はフェーズ2メンター機能のモック実装段階での作成
- API実装後、エンドポイントを実際のものに更新
- クライアント詳細ページ（M-002）実装後、遷移テストを追加
- 新機能追加時は本仕様書も更新
- テスト実施後、不具合や改善点を「備考」欄に記録

## 関連ドキュメント

- 要件定義書: `docs/requirements_mentor.md`
- 進捗管理: `docs/SCOPE_PROGRESS.md`（フェーズ2セクション）
- プロジェクト設定: `CLAUDE.md`（フェーズ2セクション）
- API仕様書: `docs/api-specs/mentor-api.md`（作成予定）
- クライアント詳細E2E: `docs/e2e-specs/mentor-client-detail-e2e.md`（作成予定）

---

**次のアクション**:
1. lib/dal.ts のモックセッション修正（userRole: 'mentor'）
2. /api/mentor/dashboard エンドポイント実装
3. 高優先度テストの実施（E2E-MENTOR-001から順次）
4. 問題発見時は Issues登録
5. SCOPE_PROGRESS.mdのE2Eテスト進捗表を更新
6. 全テスト完了後、カバレッジレポート作成
7. 分割ファイル作成（mentor-basic.spec.md など）
